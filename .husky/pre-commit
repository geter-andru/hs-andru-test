#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "üîç Running code quality checks..."

# Check 1: No JSX files
if find . -name "*.jsx" -not -path "./node_modules/*" | grep -q .; then
  echo "‚ùå JSX files found! Use .tsx instead:"
  find . -name "*.jsx" -not -path "./node_modules/*"
  exit 1
fi

# Check 2: No mock data
if grep -r "mockData\|MOCK_DATA\|fake.*data" app/ lib/ --include="*.tsx" --include="*.ts" 2>/dev/null; then
  echo "‚ùå Mock data found! Implement real data fetching."
  exit 1
fi

# Check 3: TypeScript compilation
if ! npm run type-check; then
  echo "‚ùå TypeScript errors found! Fix them before committing."
  exit 1
fi

# Check 4: ESLint
if ! npm run lint; then
  echo "‚ùå Linting errors found! Fix them before committing."
  exit 1
fi

echo "‚úÖ All checks passed!"