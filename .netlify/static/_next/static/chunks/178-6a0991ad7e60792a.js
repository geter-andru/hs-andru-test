"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{371:(e,t,r)=>{r.d(t,{W:()=>n});var s=r(2115),a=r(9535);function n(){let[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0),[i,l]=(0,s.useState)(null),d=(0,a.createBrowserClient)("https://your-project.supabase.co","your_supabase_anon_key_here");return(0,s.useEffect)(()=>{(async()=>{try{let{data:{session:r},error:s}=await d.auth.getSession();if(s)l(s.message);else{var e;n(r),t(null!=(e=null==r?void 0:r.user)?e:null)}}catch(e){l(e instanceof Error?e.message:"Failed to get session")}finally{c(!1)}})();let{data:{subscription:e}}=d.auth.onAuthStateChange(async(e,r)=>{var s;n(r),t(null!=(s=null==r?void 0:r.user)?s:null),c(!1),l(null)});return()=>e.unsubscribe()},[d.auth]),{user:e,session:r,loading:o,error:i,signOut:async()=>{try{c(!0);let{error:e}=await d.auth.signOut();e&&l(e.message)}catch(e){l(e instanceof Error?e.message:"Failed to sign out")}finally{c(!1)}},refreshSession:async()=>{try{c(!0);let{data:{session:r},error:s}=await d.auth.refreshSession();if(s)l(s.message);else{var e;n(r),t(null!=(e=null==r?void 0:r.user)?e:null)}}catch(e){l(e instanceof Error?e.message:"Failed to refresh session")}finally{c(!1)}}}}},1321:(e,t,r)=>{r.d(t,{W8:()=>N,lH:()=>S,gG:()=>j,ze:()=>w,cN:()=>b,Uv:()=>v,in:()=>_,Wn:()=>E,NT:()=>C,p1:()=>A,EK:()=>I,h_:()=>k});var s=r(2960),a=r(5041),n=r(6715),o=r(3568),c=r(3464),i=r(7383);let l=r(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:3001",d="hs_access_token",u="hs_refresh_token",m="hs_customer_id",x=c.A.create({baseURL:l,timeout:3e4,headers:{"Content-Type":"application/json"}});x.interceptors.request.use(e=>{let t=i.A.get(d);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),x.interceptors.response.use(e=>e,async e=>{var t,r,s,a;let n=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!n._retry){n._retry=!0;try{let e=i.A.get(u);if(e){let{accessToken:t}=(await c.A.post("".concat(l,"/api/auth/refresh"),{refreshToken:e})).data.data;return i.A.set(d,t,{expires:1}),n.headers&&(n.headers.Authorization="Bearer ".concat(t)),x(n)}}catch(e){return i.A.remove(d),i.A.remove(u),i.A.remove(m),window.location.href="/login",Promise.reject(e)}}return(null==(r=e.response)?void 0:r.status)===429?o.Ay.error("Rate limit exceeded. Please wait before trying again."):(null==(s=e.response)?void 0:s.status)===500?o.Ay.error("Server error. Please try again later."):(null==(a=e.response)?void 0:a.status)===403&&o.Ay.error("Access denied. You do not have permission to perform this action."),Promise.reject(e)});let p={async login(e){try{let{accessToken:t,refreshToken:r,customer:s}=(await x.post("/api/auth/token",{customerId:e})).data.data;return i.A.set(d,t,{expires:1}),i.A.set(u,r,{expires:7}),i.A.set(m,e,{expires:7}),{success:!0,data:s}}catch(e){var t,r;return{success:!1,error:(null==(r=e.response)||null==(t=r.data)?void 0:t.error)||"Login failed"}}},logout(){i.A.remove(d),i.A.remove(u),i.A.remove(m),window.location.href="/login"},getCustomerId:()=>i.A.get(m),isAuthenticated:()=>!!i.A.get(d)},h={getCustomer:async e=>(await x.get("/api/customer/".concat(e))).data,getICP:async e=>(await x.get("/api/customer/".concat(e,"/icp"))).data},y={calculate:async e=>(await x.post("/api/cost-calculator/calculate",e)).data,calculateWithAI:async e=>(await x.post("/api/cost-calculator/calculate-ai",e)).data,getHistory:async e=>(await x.get("/api/cost-calculator/history/".concat(e))).data},f={getProgress:async e=>(await x.get("/api/progress/".concat(e))).data,trackAction:async(e,t,r)=>(await x.post("/api/progress/".concat(e,"/track"),{action:t,metadata:r})).data,getMilestones:async e=>(await x.get("/api/progress/".concat(e,"/milestones"))).data,getInsights:async e=>(await x.get("/api/progress/".concat(e,"/insights"))).data,completeMilestone:async(e,t,r)=>(await x.post("/api/progress/".concat(e,"/milestones/").concat(t,"/complete"),{metadata:r})).data},g={exportICP:async e=>(await x.post("/api/export/icp",e)).data,exportCostCalculator:async e=>(await x.post("/api/export/cost-calculator",e)).data,exportBusinessCase:async e=>(await x.post("/api/export/business-case",e)).data,exportComprehensive:async e=>(await x.post("/api/export/comprehensive",e)).data};function b(e){return(0,s.I)({queryKey:["customer",e],queryFn:()=>h.getCustomer(e),enabled:!!e})}function v(e){return(0,s.I)({queryKey:["customer-icp",e],queryFn:()=>h.getICP(e),enabled:!!e})}function j(){return(0,a.n)({mutationFn:y.calculate,onSuccess:()=>{o.Ay.success("Cost calculation completed!")},onError:e=>{var t,r;o.Ay.error((null==(r=e.response)||null==(t=r.data)?void 0:t.error)||"Cost calculation failed")}})}function N(){return(0,a.n)({mutationFn:y.calculateWithAI,onSuccess:()=>{o.Ay.success("AI-enhanced cost calculation completed!")},onError:e=>{var t,r;o.Ay.error((null==(r=e.response)||null==(t=r.data)?void 0:t.error)||"AI cost calculation failed")}})}function w(e){return(0,s.I)({queryKey:["cost-history",e],queryFn:()=>y.getHistory(e),enabled:!!e})}function A(e){return(0,s.I)({queryKey:["progress",e],queryFn:()=>f.getProgress(e),enabled:!!e,refetchInterval:3e4})}function C(e){return(0,s.I)({queryKey:["milestones",e],queryFn:()=>f.getMilestones(e),enabled:!!e})}function I(e){return(0,s.I)({queryKey:["progress-insights",e],queryFn:()=>f.getInsights(e),enabled:!!e})}function k(){let e=(0,n.jE)();return(0,a.n)({mutationFn:e=>{let{customerId:t,action:r,metadata:s}=e;return f.trackAction(t,r,s)},onSuccess:(t,r)=>{var s;e.invalidateQueries({queryKey:["progress",r.customerId]}),e.invalidateQueries({queryKey:["milestones",r.customerId]}),(null==(s=t.data.milestonesTriggered)?void 0:s.length)>0&&o.Ay.success("Milestone achieved: ".concat(t.data.milestonesTriggered[0].name,"!"),{duration:5e3,icon:"\uD83C\uDF89"})}})}function S(){let e=(0,n.jE)();return(0,a.n)({mutationFn:e=>{let{customerId:t,milestoneId:r,metadata:s}=e;return f.completeMilestone(t,r,s)},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["progress",r.customerId]}),e.invalidateQueries({queryKey:["milestones",r.customerId]}),o.Ay.success("Milestone completed!")},onError:e=>{var t,r;o.Ay.error((null==(r=e.response)||null==(t=r.data)?void 0:t.error)||"Failed to complete milestone")}})}function _(){return(0,a.n)({mutationFn:e=>{let{type:t,data:r}=e;switch(t){case"icp":return g.exportICP(r);case"cost-calculator":return g.exportCostCalculator(r);case"business-case":return g.exportBusinessCase(r);case"comprehensive":return g.exportComprehensive(r);default:throw Error("Invalid export type")}},onSuccess:e=>{o.Ay.success("Export initiated successfully!"),e.data.downloadUrl&&window.open(e.data.downloadUrl,"_blank")},onError:e=>{var t,r;o.Ay.error((null==(r=e.response)||null==(t=r.data)?void 0:t.error)||"Export failed")}})}function E(){return()=>{p.logout(),o.Ay.success("Logged out successfully")}}},2618:(e,t,r)=>{r.d(t,{k:()=>N});var s=r(5155),a=r(2115),n=r(5695),o=r(6874),c=r.n(o),i=r(4219),l=r(9994),d=r(2975),u=r(4761),m=r(5500),x=r(1442),p=r(8046),h=r(7186),y=r(6678),f=r(7765),g=r(8828),b=r(1321);let v=[{id:"icp",label:"ICP",icon:i.A,href:"/icp"},{id:"dashboard",label:"Dashboard",icon:l.A,href:"/dashboard"},{id:"resources",label:"Resources",icon:d.A,href:"/resources"},{id:"cost-calculator",label:"Cost Calculator",icon:u.A,href:"/cost"},{id:"assessment",label:"Assessment",icon:m.A,href:"/assessment"}],j=e=>{let{item:t,isActive:r,onClick:a}=e,n=t.icon;return(0,s.jsxs)(c(),{href:t.href,onClick:()=>a(t.id),className:"\n        w-full group relative flex items-center px-3 py-3 rounded-lg transition-all duration-200 ease-out\n        ".concat(r?"bg-brand-primary/10 text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary hover:bg-surface-hover","\n      "),children:[(0,s.jsx)("div",{className:"\n        flex items-center justify-center w-8 h-8 rounded-md transition-colors duration-200\n        ".concat(r?"bg-brand-primary/20 text-text-primary":"text-text-muted group-hover:text-text-primary group-hover:bg-surface/30","\n      "),children:(0,s.jsx)(n,{className:"w-5 h-5",strokeWidth:1.5})}),(0,s.jsx)("div",{className:"ml-3 flex-1 min-w-0",children:(0,s.jsx)("span",{className:"\n          text-sm font-medium truncate\n          ".concat(r?"text-text-primary":"text-text-secondary group-hover:text-text-primary","\n        "),children:t.label})}),r&&(0,s.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-0.5 h-6 bg-brand-primary rounded-full"})]})};function N(e){let{children:t}=e;(0,n.useRouter)();let r=(0,n.usePathname)(),o=(0,b.Wn)(),[i,l]=(0,a.useState)("dashboard"),[d,u]=(0,a.useState)(!1),[m,N]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=v.find(e=>e.href===r);e&&l(e.id)},[r]),(0,s.jsxs)("div",{className:"flex h-screen bg-black",children:[(0,s.jsxs)("div",{className:"\n        bg-background-secondary border-r border-surface flex flex-col transition-all duration-200 ease-out relative\n        before:absolute before:inset-0 before:bg-gradient-to-b before:from-brand-primary/5 before:to-brand-accent/5 before:pointer-events-none\n        ".concat(d?"w-16":"w-72","\n      "),children:[(0,s.jsxs)("div",{className:"p-4 border-b border-surface relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-primary/10 to-brand-accent/10 rounded-lg opacity-50"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center ".concat(d?"justify-center":""),children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-brand-primary to-brand-accent rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-text-primary font-bold text-sm",children:"H&S"})}),!d&&(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h1",{className:"text-text-primary font-semibold text-sm",children:"Platform"}),(0,s.jsx)("p",{className:"text-text-muted text-xs",children:"Revenue Intelligence"})]})]}),(0,s.jsx)("button",{onClick:()=>u(!d),className:"p-1.5 rounded-md text-text-muted hover:text-text-primary hover:bg-surface-hover transition-colors",children:(0,s.jsx)(x.A,{className:"w-3.5 h-3.5 transition-transform duration-200 ".concat(d?"rotate-0":"rotate-180")})})]})}),!d&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(p.A,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-text-muted"}),(0,s.jsx)("input",{type:"text",placeholder:"Search materials, data...",value:m,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-background-elevated border border-surface rounded-lg text-text-primary text-sm placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-brand-primary/50 focus:border-brand-primary transition-colors"})]})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,s.jsx)("nav",{className:"space-y-6",children:(0,s.jsx)("div",{className:"space-y-1 px-2",children:v.map(e=>(0,s.jsx)(j,{item:e,isActive:i===e.id,onClick:l},e.id))})})}),!d&&(0,s.jsxs)("div",{className:"p-4 border-t border-surface relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-accent/5 to-brand-primary/5"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-text-muted mb-3",children:[(0,s.jsx)("span",{children:"Customer ID: CUST_2"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-accent-success rounded-full mr-1"}),(0,s.jsx)("span",{className:"text-text-primary",children:"Live"})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)(c(),{href:"/settings",className:"flex items-center px-3 py-2 text-sm font-medium text-text-secondary rounded-lg hover:bg-surface-hover hover:text-text-primary transition-colors",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-3 text-text-muted"}),"Settings"]}),(0,s.jsxs)("button",{onClick:()=>{o()},className:"w-full flex items-center px-3 py-2 text-sm font-medium text-text-secondary rounded-lg hover:bg-surface-hover hover:text-text-primary transition-colors",children:[(0,s.jsx)(y.A,{className:"h-4 w-4 mr-3 text-text-muted"}),"Logout"]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsxs)("header",{className:"bg-background-elevated border-b border-surface px-6 py-4 relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-primary/5 via-brand-accent/5 to-brand-secondary/5"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center flex-1",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-text-primary mr-8",children:"Revenue Intelligence"}),(0,s.jsx)("div",{className:"max-w-md w-full",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(p.A,{className:"w-4.5 h-4.5 absolute left-3 top-1/2 transform -translate-y-1/2 text-text-muted"}),(0,s.jsx)("input",{type:"text",placeholder:"Search materials, customers, data...",className:"w-full pl-10 pr-4 py-2.5 border border-surface bg-background-elevated rounded-lg text-text-primary text-sm placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-brand-primary/50 focus:border-brand-primary transition-colors"})]})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{className:"px-4 py-2 bg-brand-primary text-text-primary text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center shadow-medium",children:[(0,s.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Quick Actions"]}),(0,s.jsxs)("button",{className:"relative p-2 text-text-secondary hover:text-text-primary transition-colors",children:[(0,s.jsx)(g.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-accent-danger text-text-primary text-xs rounded-full flex items-center justify-center",children:"3"})]}),(0,s.jsx)("button",{className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:(0,s.jsx)(h.A,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 pl-4 border-l border-surface",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-brand-primary to-brand-accent rounded-full flex items-center justify-center",children:(0,s.jsx)(y.A,{className:"w-4 h-4 text-text-primary"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-text-primary",children:"Sarah C."})]})]})]})})]}),(0,s.jsx)("main",{className:"flex-1 bg-background-primary",children:t})]})]})}}}]);