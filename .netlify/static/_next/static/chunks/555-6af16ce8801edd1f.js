"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[555],{2948:(e,t,s)=>{s.d(t,{o:()=>m});var a=s(5155);s(2115);var n=s(3117),l=s(5713),o=s(4403),r=s(9546),i=s(4123);function c(e){let{value:t,max:s,label:n,color:i,trend:c,trendValue:u,description:d}=e,m=Math.min(100,Math.max(0,t/s*100)),h=88*Math.PI,p="".concat(h," ").concat(h),x=h-m/100*h;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:n}),c&&void 0!==u&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs ".concat((()=>{switch(c){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}})()),children:[(()=>{switch(c){case"up":return(0,a.jsx)(l.A,{className:"h-4 w-4 text-green-500"});case"down":return(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"});case"stable":return(0,a.jsx)(r.A,{className:"h-4 w-4 text-gray-500"});default:return null}})(),(0,a.jsx)("span",{children:Math.abs(u)})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("svg",{height:120,width:120,className:"transform -rotate-90",children:[(0,a.jsx)("circle",{stroke:"#e5e7eb",fill:"transparent",strokeWidth:8,r:44,cx:60,cy:60}),(0,a.jsx)("circle",{stroke:i,fill:"transparent",strokeWidth:8,strokeDasharray:p,strokeDashoffset:x,strokeLinecap:"round",r:44,cx:60,cy:60,className:"transition-all duration-500 ease-in-out"})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["/ ",s]})]})})]})}),d&&(0,a.jsx)("p",{className:"text-xs text-gray-600 text-center",children:d})]})}function u(e){let{competencyData:t}=e;if(!t)return null;let s=t.currentLevel,l=n.e.find(e=>e.id===(null==s?void 0:s.nextLevel)),o=t.levelProgress||0;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Level Progress"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(o),"%"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium",style:{color:(null==s?void 0:s.color)||"#6B7280"},children:(null==s?void 0:s.name)||"Unknown Level"}),(0,a.jsxs)("span",{className:"text-gray-600",children:[t.totalPoints||0," pts"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ease-in-out",style:{backgroundColor:(null==s?void 0:s.color)||"#6B7280",width:"".concat(o,"%")}})}),l&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Next: ",l.name]}),(0,a.jsxs)("span",{children:[l.points-(t.totalPoints||0)," pts to go"]})]})]})]})}function d(e){var t,s;let{competencyData:n}=e;return n?(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border border-blue-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Overall Score"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:(t=n.overallScore||0)>=80?"Excellent":t>=60?"Good":t>=40?"Developing":"Needs Improvement"})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold ".concat((s=n.overallScore||0)>=80?"text-green-600":s>=60?"text-yellow-600":s>=40?"text-orange-600":"text-red-600"),children:n.overallScore||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"out of 100"})]})]}):null}function m(e){var t,s;let{competencyData:l,analytics:o,competencyAreas:r,nextUnlock:i,competencyBaselines:m,assessmentData:h,onGaugeClick:p,className:x=""}=e,g={customerAnalysis:75,valueCommunication:80,salesExecution:70,overallScore:75,totalPoints:150,currentLevel:n.e[0],levelProgress:50,lastUpdated:new Date().toISOString(),baselineScores:{customerAnalysis:60,valueCommunication:65,salesExecution:55},levelHistory:[],toolUnlockStates:{icpUnlocked:!0,costCalculatorUnlocked:!0,businessCaseUnlocked:!1,resourcesUnlocked:!1,exportUnlocked:!1}},y=l||(r&&r.length>0?g:null);if(!y)return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-32"})}),(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-24"})}),(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-24"})})]});let v=e=>{if(!(null==o?void 0:o.competencyGrowth))return{trend:"stable",trendValue:0};let t=o.competencyGrowth.find(t=>t.category===e);return t?{trend:t.trend,trendValue:t.growth}:{trend:"stable",trendValue:0}},b=v("customerAnalysis"),j=v("valueCommunication"),f=v("salesExecution");return(0,a.jsxs)("div",{className:"space-y-4 ".concat(x),children:[(0,a.jsx)(d,{competencyData:y}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsx)(c,{value:y.customerAnalysis||0,max:100,label:"Customer Analysis",color:"#3B82F6",trend:b.trend,trendValue:b.trendValue,description:"Understanding customer needs and market dynamics"}),(0,a.jsx)(c,{value:y.valueCommunication||0,max:100,label:"Value Communication",color:"#10B981",trend:j.trend,trendValue:j.trendValue,description:"Articulating value propositions effectively"}),(0,a.jsx)(c,{value:y.salesExecution||0,max:100,label:"Sales Execution",color:"#F59E0B",trend:f.trend,trendValue:f.trendValue,description:"Closing deals and managing sales processes"})]}),(0,a.jsx)(u,{competencyData:y}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Stats"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:y.totalPoints||0}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Total Points"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:(null==(s=y.currentLevel)||null==(t=s.name)?void 0:t.split(" ")[0])||"Unknown"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Current Level"})]})]})]})]})}},3117:(e,t,s)=>{s.d(t,{T:()=>n,e:()=>a});let a=[{id:"foundation",name:"Foundation",points:0,nextLevel:"developing",previousLevel:null,color:"gray"},{id:"developing",name:"Developing",points:100,nextLevel:"proficient",previousLevel:"foundation",color:"blue"},{id:"proficient",name:"Proficient",points:250,nextLevel:"expert",previousLevel:"developing",color:"green"},{id:"expert",name:"Expert",points:500,nextLevel:"master",previousLevel:"proficient",color:"purple"},{id:"master",name:"Master",points:750,nextLevel:null,previousLevel:"expert",color:"gold"}];class n{static calculateOverallScore(e){return Math.round((e.customerAnalysis+e.valueCommunication+e.salesExecution)/3)}static getCurrentLevel(e){for(let t=a.length-1;t>=0;t--)if(e>=a[t].points)return a[t];return a[0]}static calculateLevelProgress(e,t){let s=a.find(t=>t.id===e.nextLevel);if(!s)return 100;let n=e.points;return Math.min(100,Math.max(0,(t-n)/(s.points-n)*100))}static checkToolUnlock(e,t){return({icpUnlocked:!0,costCalculatorUnlocked:e.valueCommunication>=70,businessCaseUnlocked:e.salesExecution>=70,resourcesUnlocked:e.overallScore>=50,exportUnlocked:e.overallScore>=60})[t]||!1}}},3143:(e,t,s)=>{s.d(t,{J:()=>y});var a=s(5155),n=s(2115),l=s(8666),o=s(7248),r=s(5628),i=s(7695),c=s(8),u=s(3603),d=s(6865),m=s(9675);function h(e){let{item:t}=e;return(0,a.jsx)("div",{className:"rounded-lg border p-4 ".concat((()=>{switch(t.type){case"tip":return"border-yellow-200 bg-yellow-50";case"guide":return"border-blue-200 bg-blue-50";case"warning":return"border-red-200 bg-red-50";case"info":return"border-gray-200 bg-gray-50";default:return"border-gray-200 bg-white"}})()),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(()=>{switch(t.type){case"tip":return(0,a.jsx)(l.A,{className:"h-5 w-5 text-yellow-500"});case"guide":return(0,a.jsx)(o.A,{className:"h-5 w-5 text-blue-500"});case"warning":return(0,a.jsx)(r.A,{className:"h-5 w-5 text-red-500"});case"info":return(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-500"});default:return(0,a.jsx)(c.A,{className:"h-5 w-5 text-gray-500"})}})()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:t.title}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:t.description}),t.action&&(0,a.jsxs)("button",{className:"inline-flex items-center space-x-1 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:t.action})]})]})]})})}function p(e){var t;let{competencyData:s}=e;if(!s)return null;let n=[];return(null==(t=s.currentLevel)?void 0:t.id)==="foundation"&&n.push({title:"Complete Your First ICP Analysis",description:"Start building customer analysis skills",url:"/icp",icon:(0,a.jsx)(d.A,{className:"h-5 w-5 text-green-500"})}),70>(s.valueCommunication||0)&&n.push({title:"Improve Value Communication",description:"Focus on articulating value propositions",url:"/training/value-communication",icon:(0,a.jsx)(l.A,{className:"h-5 w-5 text-yellow-500"})}),70>(s.salesExecution||0)&&n.push({title:"Enhance Sales Execution",description:"Develop closing and negotiation skills",url:"/training/sales-execution",icon:(0,a.jsx)(o.A,{className:"h-5 w-5 text-blue-500"})}),0===n.length&&n.push({title:"Continue Your Journey",description:"Keep building on your strong foundation",url:"/dashboard",icon:(0,a.jsx)(m.A,{className:"h-5 w-5 text-purple-500"})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Actions"}),(0,a.jsx)("div",{className:"space-y-3",children:n.map((e,t)=>(0,a.jsx)("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[e.icon,(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]})]})},t))})]})}function x(e){var t;let{competencyData:s}=e;if(!s)return null;let n=[];return 60>(s.customerAnalysis||0)&&n.push({id:"customer-analysis-tip",title:"Improve Customer Analysis",description:"Focus on understanding customer pain points and market dynamics. Complete more ICP analyses to build this skill.",type:"tip",priority:"high"}),60>(s.valueCommunication||0)&&n.push({id:"value-communication-tip",title:"Enhance Value Communication",description:"Practice articulating ROI and value propositions. Use the cost calculator to quantify benefits.",type:"tip",priority:"high"}),60>(s.salesExecution||0)&&n.push({id:"sales-execution-tip",title:"Strengthen Sales Execution",description:"Develop closing techniques and objection handling. Use the business case builder to support your sales process.",type:"tip",priority:"high"}),(null==(t=s.currentLevel)?void 0:t.id)==="foundation"&&n.push({id:"developing-level-tip",title:"Developing Level Focus",description:"You're making great progress! Focus on completing assessments and building consistent habits.",type:"info",priority:"medium"}),(s.totalPoints||0)>500&&n.push({id:"advanced-tip",title:"Advanced Strategies",description:"Consider mentoring others and sharing your expertise. This will accelerate your own learning.",type:"guide",priority:"medium"}),(0,a.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,a.jsx)(h,{item:e},e.id))})}function g(e){let{currentPage:t}=e,s={dashboard:[{id:"dashboard-overview",title:"Dashboard Overview",description:"Your dashboard shows your competency progress, recent activity, and personalized recommendations.",type:"info",priority:"low"}],icp:[{id:"icp-analysis-guide",title:"ICP Analysis Best Practices",description:"Focus on identifying customer pain points, market size, and competitive positioning.",type:"guide",priority:"high"}],"cost-calculator":[{id:"cost-calculator-tip",title:"Cost Calculator Tips",description:"Include all relevant costs: software, training, implementation, and opportunity costs.",type:"tip",priority:"high"}],"business-case":[{id:"business-case-guide",title:"Business Case Structure",description:"Start with executive summary, include ROI calculations, and address risk mitigation.",type:"guide",priority:"high"}]}[t]||[];return 0===s.length?null:(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Page-Specific Help"}),(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsx)(h,{item:e},e.id))})]})}function y(e){let{currentPage:t,competencyData:s}=e,[l,o]=(0,n.useState)("tips");return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Contextual Help"})]}),(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>o("tips"),className:"flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("tips"===l?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Tips"}),(0,a.jsx)("button",{onClick:()=>o("actions"),className:"flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("actions"===l?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Actions"}),(0,a.jsx)("button",{onClick:()=>o("page"),className:"flex-1 px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("page"===l?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Page Help"})]})]}),"tips"===l&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Personalized Tips"}),(0,a.jsx)(x,{competencyData:s})]}),"actions"===l&&(0,a.jsx)(p,{competencyData:s}),"page"===l&&(0,a.jsx)(g,{currentPage:t})]})}},3403:(e,t,s)=>{s.d(t,{h:()=>x});var a=s(5155);s(2115);var n=s(6865),l=s(5628),o=s(5442),r=s(5500),i=s(4761),c=s(2975),u=s(5433),d=s(5052);function m(e){let{tool:t}=e,s=t.requiredValue>0?t.currentValue/t.requiredValue*100:100,r=t.unlocked,i=!r&&s>=80;return(0,a.jsx)("div",{className:"rounded-lg border p-4 ".concat(r?"border-green-200 bg-green-50":i?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(r?"bg-green-100":"bg-gray-100"),children:t.icon})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:t.name}),r?(0,a.jsx)(n.A,{className:"h-5 w-5 text-green-500"}):i?(0,a.jsx)(l.A,{className:"h-5 w-5 text-yellow-500"}):(0,a.jsx)(o.A,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:t.description}),!r&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Requirement:"})," ",t.requirement]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(i?"bg-yellow-500":"bg-gray-400"),style:{width:"".concat(Math.min(100,s),"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:[t.currentValue,"/",t.requiredValue]})]})]})]})]})})}function h(e){var t,s,n,l;let{competencyData:o}=e;if(!o)return null;let h=[{id:"icp",name:"ICP Analysis",description:"Customer intelligence and market analysis",icon:(0,a.jsx)(r.A,{className:"h-5 w-5 text-blue-600"}),unlocked:!0,requirement:"Foundation level",currentValue:100,requiredValue:0,category:"overall"},{id:"cost-calculator",name:"Cost Calculator",description:"ROI and cost impact calculations",icon:(0,a.jsx)(i.A,{className:"h-5 w-5 text-green-600"}),unlocked:(null==(t=o.toolUnlockStates)?void 0:t.costCalculatorUnlocked)||!1,requirement:"70+ Value Communication",currentValue:o.valueCommunication||0,requiredValue:70,category:"valueCommunication"},{id:"business-case",name:"Business Case Builder",description:"Comprehensive business case development",icon:(0,a.jsx)(c.A,{className:"h-5 w-5 text-purple-600"}),unlocked:(null==(s=o.toolUnlockStates)?void 0:s.businessCaseUnlocked)||!1,requirement:"70+ Sales Execution",currentValue:o.salesExecution||0,requiredValue:70,category:"salesExecution"},{id:"resources",name:"Resource Library",description:"Access to training materials and guides",icon:(0,a.jsx)(u.A,{className:"h-5 w-5 text-orange-600"}),unlocked:(null==(n=o.toolUnlockStates)?void 0:n.resourcesUnlocked)||!1,requirement:"50+ Overall Score",currentValue:o.overallScore||0,requiredValue:50,category:"overall"},{id:"export",name:"Export Tools",description:"Export analyses and reports",icon:(0,a.jsx)(d.A,{className:"h-5 w-5 text-indigo-600"}),unlocked:(null==(l=o.toolUnlockStates)?void 0:l.exportUnlocked)||!1,requirement:"60+ Overall Score",currentValue:o.overallScore||0,requiredValue:60,category:"overall"}],p=h.filter(e=>e.unlocked).length,x=h.length,g=p/x*100;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Tool Unlock Progress"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[p,"/",x," unlocked"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500 ease-in-out",style:{width:"".concat(g,"%")}})}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:100===g?"All tools unlocked! \uD83C\uDF89":"".concat(Math.round(g),"% complete")})]}),(0,a.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,a.jsx)(m,{tool:e},e.id))})]})}function p(e){var t,s,l,r;let{competencyData:i}=e;if(!i)return null;let c=[];if(!(null==(t=i.toolUnlockStates)?void 0:t.costCalculatorUnlocked)){let e=70-(i.valueCommunication||0);c.push({tool:"Cost Calculator",category:"Value Communication",current:i.valueCommunication||0,required:70,needed:e,priority:"high"})}if(!(null==(s=i.toolUnlockStates)?void 0:s.businessCaseUnlocked)){let e=70-(i.salesExecution||0);c.push({tool:"Business Case Builder",category:"Sales Execution",current:i.salesExecution||0,required:70,needed:e,priority:"high"})}if(!(null==(l=i.toolUnlockStates)?void 0:l.resourcesUnlocked)){let e=50-(i.overallScore||0);c.push({tool:"Resource Library",category:"Overall Score",current:i.overallScore||0,required:50,needed:e,priority:"medium"})}if(!(null==(r=i.toolUnlockStates)?void 0:r.exportUnlocked)){let e=60-(i.overallScore||0);c.push({tool:"Export Tools",category:"Overall Score",current:i.overallScore||0,required:60,needed:e,priority:"medium"})}if(0===c.length)return(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-green-900",children:"All Tools Unlocked!"})]}),(0,a.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Congratulations! You have access to all available tools."})]});c.sort((e,t)=>e.priority!==t.priority?"high"===e.priority?-1:1:e.needed-t.needed);let u=c[0];return(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 text-blue-500"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-900",children:"Next Unlock Target"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-blue-900",children:u.tool}),(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:["Need ",u.needed," more points in ",u.category]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex-1 bg-blue-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(u.current/u.required*100,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-blue-600",children:[u.current,"/",u.required]})]})]})]})}function x(e){let{competencyData:t}=e;return t?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(p,{competencyData:t}),(0,a.jsx)(h,{competencyData:t})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-24"})}),(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-32"})})]})}},6981:(e,t,s)=>{s.d(t,{L:()=>h});var a=s(5155);s(2115);var n=s(9675),l=s(6474),o=s(6865),r=s(7695),i=s(8828),c=s(4500);function u(e){let{notification:t,onDismiss:s}=e;return(0,a.jsx)("div",{className:"rounded-lg border p-4 ".concat((()=>{switch(t.type){case"level_up":return"border-yellow-200 bg-yellow-50";case"tool_unlock":return"border-blue-200 bg-blue-50";case"milestone_achieved":return"border-green-200 bg-green-50";default:return"border-gray-200 bg-white"}})()," ").concat(t.read?"":"ring-2 ring-blue-500 ring-opacity-50"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(()=>{switch(t.type){case"level_up":return(0,a.jsx)(n.A,{className:"h-5 w-5 text-yellow-500"});case"tool_unlock":return(0,a.jsx)(l.A,{className:"h-5 w-5 text-blue-500"});case"milestone_achieved":return(0,a.jsx)(o.A,{className:"h-5 w-5 text-green-500"});case"progress_update":return(0,a.jsx)(r.A,{className:"h-5 w-5 text-gray-500"});default:return(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-500"})}})()}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:t.title}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:t.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(e=>{let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/6e4);return s<1?"Just now":s<60?"".concat(s,"m ago"):s<1440?"".concat(Math.floor(s/60),"h ago"):t.toLocaleDateString()})(t.timestamp)})]}),(0,a.jsx)("button",{onClick:()=>s(t.id),className:"flex-shrink-0 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]})})]})})}function d(e){let{notifications:t}=e,s=t.filter(e=>!e.read).length,n=t.length,l=t.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{});return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Notification Summary"}),(0,a.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(s>0?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:[s," unread"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:n}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Total"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:s}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Unread"})]})]}),Object.keys(l).length>0&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"By Type"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(l).map(e=>{let[t,s]=e;return(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:[t.replace("_"," "),": ",s]},t)})})]})]})}function m(){return(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(i.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"You're all caught up! New notifications will appear here as you progress."})]})}function h(e){let{notifications:t,onDismiss:s}=e,n=t.filter(e=>!e.read),l=t.filter(e=>e.read);return 0===t.length?(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsx)(m,{})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(d,{notifications:t}),n.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:["Unread (",n.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,a.jsx)(u,{notification:e,onDismiss:s},e.id))})]}),l.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:["Read (",l.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,a.jsx)(u,{notification:e,onDismiss:s},e.id))})]})]})}},7629:(e,t,s)=>{s.d(t,{f:()=>p});var a=s(5155);s(2115);var n=s(7572),l=s(4905),o=s(9546),r=s(7305),i=s(9675),c=s(5500);function u(e){let{label:t,value:s,change:r,icon:i,color:c}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(c),children:i}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs ".concat(r>0?"text-green-600":r<0?"text-red-600":"text-gray-600"),children:[r>0?(0,a.jsx)(n.A,{className:"h-4 w-4 text-green-500"}):r<0?(0,a.jsx)(l.A,{className:"h-4 w-4 text-red-500"}):(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{children:Math.abs(r)})]})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s})]})}function d(e){let{analytics:t}=e;if(!(null==t?void 0:t.progressTrends)||0===t.progressTrends.length)return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Recent Activity"}),(0,a.jsx)("div",{className:"text-center text-gray-500 text-sm py-4",children:"No recent activity to display"})]});let s=t.progressTrends.slice(-5).reverse();return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Recent Activity"}),(0,a.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Overall: ",e.overallScore," | Points: ",e.points]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 text-xs text-gray-500",children:new Date(e.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},t))})]})}function m(e){let{progressSummary:t}=e,s=[{category:"Customer Analysis",improvement:t.competencyImprovements.customerAnalysis,color:"bg-blue-100 text-blue-600"},{category:"Value Communication",improvement:t.competencyImprovements.valueCommunication,color:"bg-green-100 text-green-600"},{category:"Sales Execution",improvement:t.competencyImprovements.salesExecution,color:"bg-yellow-100 text-yellow-600"}];return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Competency Improvements"}),(0,a.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.category}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(e.color),children:[e.improvement>0?(0,a.jsx)(n.A,{className:"h-3 w-3"}):e.improvement<0?(0,a.jsx)(l.A,{className:"h-3 w-3"}):(0,a.jsx)(o.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.improvement>0?"+":"",e.improvement]})]})]},t))})]})}function h(e){let{analytics:t}=e;if(!t)return null;let s=[];if(t.competencyGrowth){let e=t.competencyGrowth.filter(e=>e.growth>0).sort((e,t)=>t.growth-e.growth)[0];e&&s.push({type:"growth",message:"".concat(e.category," shows the strongest growth (+").concat(e.growth," points)"),icon:(0,a.jsx)(n.A,{className:"h-4 w-4 text-green-500"})})}if(t.skillGaps&&t.skillGaps.length>0){let e=t.skillGaps.find(e=>"high"===e.priority);e&&s.push({type:"gap",message:"Focus on ".concat(e.skill," (").concat(e.gap," point gap)"),icon:(0,a.jsx)(r.A,{className:"h-4 w-4 text-yellow-500"})})}return(t.progressVelocity&&t.progressVelocity.velocity>0&&s.push({type:"velocity",message:"Great momentum! ".concat(t.progressVelocity.velocity.toFixed(1)," points/day"),icon:(0,a.jsx)(i.A,{className:"h-4 w-4 text-blue-500"})}),0===s.length)?(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Performance Insights"}),(0,a.jsx)("div",{className:"text-center text-gray-500 text-sm py-4",children:"Keep working to unlock insights!"})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Performance Insights"}),(0,a.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.icon}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:e.message})]},t))})]})}function p(e){let{progressSummary:t,analytics:s}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsx)(u,{label:"Points Gained",value:t.pointsGained,change:t.pointsGained,icon:(0,a.jsx)(i.A,{className:"h-5 w-5 text-yellow-600"}),color:"bg-yellow-100"}),(0,a.jsx)(u,{label:"Level Advancements",value:t.levelAdvancements,change:t.levelAdvancements,icon:(0,a.jsx)(r.A,{className:"h-5 w-5 text-purple-600"}),color:"bg-purple-100"}),(0,a.jsx)(u,{label:"Tools Unlocked",value:t.toolsUnlocked,change:t.toolsUnlocked,icon:(0,a.jsx)(c.A,{className:"h-5 w-5 text-green-600"}),color:"bg-green-100"})]}),(0,a.jsx)(m,{progressSummary:t}),(0,a.jsx)(d,{analytics:s}),(0,a.jsx)(h,{analytics:s})]})}},9464:(e,t,s)=>{s.d(t,{FE:()=>c});var a=s(2115),n=s(3117);class l{async calculateAnalytics(){let e=this.calculateProgressTrends(),t=this.calculateCompetencyGrowth(),s=this.calculatePerformanceMetrics(),a=this.identifySkillGaps(),n=this.generateDevelopmentRecommendations(),l=await this.calculatePeerComparison(),o=await this.calculateIndustryBenchmarks(),r=this.calculateProgressVelocity();return{overallScore:this.competencyData.overallScore,categoryScores:{customerAnalysis:this.competencyData.customerAnalysis,valueCommunication:this.competencyData.valueCommunication,salesExecution:this.competencyData.salesExecution},progressTrend:e[0]||{period:"current",score:this.competencyData.overallScore,change:0,velocity:{weekly:0,monthly:0,quarterly:0,period:"month",pointsGained:0},date:new Date().toISOString(),customerAnalysis:this.competencyData.customerAnalysis,valueCommunication:this.competencyData.valueCommunication,salesExecution:this.competencyData.salesExecution,overallScore:this.competencyData.overallScore,points:this.competencyData.totalPoints},progressTrends:e,competencyGrowth:t,milestoneAchievements:[],performanceMetrics:s,skillGaps:a,recommendations:n,peerComparison:l,industryBenchmark:o,progressVelocity:{velocity:r.monthly},lastUpdated:new Date().toISOString(),analyticsPeriod:"month"}}calculateProgressTrends(){return 0===this.progressHistory.length?[{period:"current",score:this.competencyData.overallScore,change:0,velocity:{weekly:0,monthly:0,quarterly:0,period:"month",pointsGained:0},date:new Date().toISOString(),customerAnalysis:this.competencyData.customerAnalysis,valueCommunication:this.competencyData.valueCommunication,salesExecution:this.competencyData.salesExecution,overallScore:this.competencyData.overallScore,points:this.competencyData.totalPoints}]:this.progressHistory}calculateCompetencyGrowth(){return["customerAnalysis","valueCommunication","salesExecution"].map(e=>{let t=this.competencyData[e],s=this.competencyData.baselineScores[e],a=t-s,n="stable";return a>5?n="increasing":a<-5&&(n="decreasing"),{period:"current",growth:a,milestones:[],category:e,currentScore:t,baselineScore:s,growthPercentage:s>0?a/s*100:0,trend:n}})}calculatePerformanceMetrics(){let e=[];return e.push({name:"Overall Competency Score",target:100,metric:"Overall Competency Score",value:this.competencyData.overallScore,unit:"points",trend:this.calculateTrend(),change:this.calculateChange(),period:"month"}),e.push({name:"Total Progress Points",target:750,metric:"Total Progress Points",value:this.competencyData.totalPoints,unit:"points",trend:this.calculateTrend(),change:this.calculateChange(),period:"month"}),e.push({name:"Level Progress",target:100,metric:"Level Progress",value:this.competencyData.levelProgress,unit:"%",trend:this.calculateTrend(),change:this.calculateChange(),period:"month"}),e}identifySkillGaps(){let e=[];return["customerAnalysis","valueCommunication","salesExecution"].forEach(t=>{let s=this.competencyData[t],a=80-s;if(a>10){let n="low";a>30?n="high":a>20&&(n="medium"),e.push({skill:this.getSkillName(t),currentLevel:s,targetLevel:80,gap:a,priority:n,recommendations:this.getSkillRecommendations(t)})}}),e}generateDevelopmentRecommendations(){let e=[];return this.identifySkillGaps().forEach(t=>{"high"===t.priority&&e.push({type:"course",id:"improve-".concat(t.skill.toLowerCase().replace(/\s+/g,"-")),title:"Improve ".concat(t.skill," Skills"),description:"Focus on developing ".concat(t.skill," competencies to reach target level"),category:"competency",priority:"high",estimatedTime:"2-4 weeks",resources:this.getSkillResources(t.skill),prerequisites:[]})}),this.competencyData.toolUnlockStates.costCalculatorUnlocked||e.push({type:"practice",id:"unlock-cost-calculator",title:"Unlock Cost Calculator Tool",description:"Improve Value Communication skills to unlock the Cost Calculator",category:"tool",priority:"medium",estimatedTime:"1-2 weeks",resources:["Value Communication Assessment","ROI Communication Guide"],prerequisites:["70+ Value Communication competency"]}),this.competencyData.toolUnlockStates.businessCaseUnlocked||e.push({type:"practice",id:"unlock-business-case",title:"Unlock Business Case Builder",description:"Improve Sales Execution skills to unlock the Business Case Builder",category:"tool",priority:"medium",estimatedTime:"1-2 weeks",resources:["Sales Execution Assessment","Business Case Guide"],prerequisites:["70+ Sales Execution competency"]}),e}async calculatePeerComparison(){return{userScore:this.competencyData.overallScore,peerAverage:65,percentile:75,averageScore:65,topPerformers:90}}async calculateIndustryBenchmarks(){return{industry:"Technology Sales",averageScore:55,topQuartile:85,position:65,metric:"Overall Competency Score",userValue:this.competencyData.overallScore}}calculateProgressVelocity(){var e,t;if(this.progressHistory.length<2)return{weekly:0,monthly:0,quarterly:0,period:"month",pointsGained:0};let s=this.progressHistory.slice(-30),a=this.progressHistory.slice(-60,-30),n=((null==(e=s[s.length-1])?void 0:e.points)||0)-((null==(t=a[a.length-1])?void 0:t.points)||0);return{weekly:n/4,monthly:n,quarterly:3*n,period:"month",pointsGained:n}}calculateTrend(){return"up"}calculateChange(){return 5}getSkillName(e){return({customerAnalysis:"Customer Analysis",valueCommunication:"Value Communication",salesExecution:"Sales Execution"})[e]||e}getSkillRecommendations(e){return({customerAnalysis:["Complete more ICP analyses","Study customer research methodologies","Practice prospect qualification techniques"],valueCommunication:["Focus on ROI communication","Practice value proposition development","Study stakeholder communication strategies"],salesExecution:["Practice objection handling","Study closing techniques","Develop negotiation skills"]})[e]||[]}getSkillResources(e){return({"Customer Analysis":["ICP Analysis Guide","Prospect Qualification Framework","Customer Research Methodology"],"Value Communication":["ROI Communication Guide","Value Proposition Template","Stakeholder Communication Best Practices"],"Sales Execution":["Objection Handling Playbook","Closing Techniques Guide","Negotiation Strategies"]})[e]||[]}constructor(e,t,s=[]){this.userId=e,this.competencyData=t,this.progressHistory=s}}class o{async trackProgress(e){let t=this.calculatePointsAwarded(e),s=this.calculateCompetencyUpdates(e,t);this.updateCompetencyData(s,t);let a=this.checkLevelChange(),n=a?this.competencyData.currentLevel.id:void 0,l=this.checkToolUnlocks(),o={userId:this.userId,action:e,pointsAwarded:t,competencyUpdates:s,levelChanged:a,newLevel:n,toolsUnlocked:l,timestamp:new Date().toISOString()};return this.addToProgressHistory(o),this.notifyCallbacks(o),o}calculatePointsAwarded(e){let t=e.pointValue;return Math.round(t*=({low:1,medium:1.5,high:2})[e.impactLevel]*this.getLevelBonus())}calculateCompetencyUpdates(e,t){let s={},a=Math.min(5,Math.round(t/10));switch(e.category){case"customerAnalysis":s.customerAnalysis=Math.min(100,this.competencyData.customerAnalysis+a);break;case"valueCommunication":s.valueCommunication=Math.min(100,this.competencyData.valueCommunication+a);break;case"salesExecution":s.salesExecution=Math.min(100,this.competencyData.salesExecution+a)}return s}updateCompetencyData(e,t){void 0!==e.customerAnalysis&&(this.competencyData.customerAnalysis=e.customerAnalysis),void 0!==e.valueCommunication&&(this.competencyData.valueCommunication=e.valueCommunication),void 0!==e.salesExecution&&(this.competencyData.salesExecution=e.salesExecution),this.competencyData.totalPoints+=t,this.competencyData.overallScore=n.T.calculateOverallScore(this.competencyData),this.competencyData.currentLevel=n.T.getCurrentLevel(this.competencyData.totalPoints),this.competencyData.levelProgress=n.T.calculateLevelProgress(this.competencyData.currentLevel,this.competencyData.totalPoints),this.competencyData.lastUpdated=new Date().toISOString()}checkLevelChange(){return n.T.getCurrentLevel(this.competencyData.totalPoints).id!==this.competencyData.currentLevel.id}checkToolUnlocks(){let e=[];return!this.competencyData.toolUnlockStates.costCalculatorUnlocked&&this.competencyData.valueCommunication>=70&&(this.competencyData.toolUnlockStates.costCalculatorUnlocked=!0,e.push("costCalculator")),!this.competencyData.toolUnlockStates.businessCaseUnlocked&&this.competencyData.salesExecution>=70&&(this.competencyData.toolUnlockStates.businessCaseUnlocked=!0,e.push("businessCase")),!this.competencyData.toolUnlockStates.resourcesUnlocked&&this.competencyData.overallScore>=50&&(this.competencyData.toolUnlockStates.resourcesUnlocked=!0,e.push("resources")),!this.competencyData.toolUnlockStates.exportUnlocked&&this.competencyData.overallScore>=60&&(this.competencyData.toolUnlockStates.exportUnlocked=!0,e.push("export")),e}addToProgressHistory(e){let t={period:"current",score:this.competencyData.overallScore,change:0,velocity:{weekly:0,monthly:0,quarterly:0,period:"month",pointsGained:0},date:e.timestamp,customerAnalysis:this.competencyData.customerAnalysis,valueCommunication:this.competencyData.valueCommunication,salesExecution:this.competencyData.salesExecution,overallScore:this.competencyData.overallScore,points:this.competencyData.totalPoints};this.progressHistory.push(t),this.progressHistory.length>365&&(this.progressHistory=this.progressHistory.slice(-365))}getLevelBonus(){return 1+.1*n.e.findIndex(e=>e.id===this.competencyData.currentLevel.id)}subscribe(e){return this.updateCallbacks.push(e),()=>{let t=this.updateCallbacks.indexOf(e);t>-1&&this.updateCallbacks.splice(t,1)}}notifyCallbacks(e){this.updateCallbacks.forEach(t=>{try{t(e)}catch(e){console.error("Error in progress update callback:",e)}})}getCompetencyData(){return{...this.competencyData}}getProgressHistory(){return[...this.progressHistory]}getProgressSummary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=new Date;t.setDate(t.getDate()-e);let s=this.progressHistory.filter(e=>new Date(e.date)>=t);if(0===s.length)return{pointsGained:0,levelAdvancements:0,toolsUnlocked:0,competencyImprovements:{customerAnalysis:0,valueCommunication:0,salesExecution:0}};let a=s[0],n=s[s.length-1];return{pointsGained:n.points-a.points,levelAdvancements:0,toolsUnlocked:0,competencyImprovements:{customerAnalysis:n.customerAnalysis-a.customerAnalysis,valueCommunication:n.valueCommunication-a.valueCommunication,salesExecution:n.salesExecution-a.salesExecution}}}constructor(e,t,s=[]){this.updateCallbacks=[],this.userId=e,this.competencyData=t,this.progressHistory=s}}var r=s(2354);class i{async initialize(){try{await this.subscribeToCompetencyUpdates(),await this.subscribeToProgressUpdates(),await this.subscribeToMilestoneUpdates(),await this.subscribeToToolUnlocks(),console.log("Supabase Realtime initialized successfully")}catch(e){throw console.error("Error initializing Supabase Realtime:",e),e}}async subscribeToCompetencyUpdates(){let e=this.supabase.channel("competency-updates-".concat(this.userId)).on("postgres_changes",{event:"*",schema:"public",table:"competency_data",filter:"user_id=eq.".concat(this.userId)},e=>{var t;console.log("Competency update received:",e);let s={type:"level_up",userId:this.userId,category:"overallScore",newScore:(null==(t=e.new)?void 0:t.overallScore)||0,source:"realtime",timestamp:new Date().toISOString()};this.emit("competency_update",s)}).subscribe();this.channels.set("competency-updates",e)}async subscribeToProgressUpdates(){let e=this.supabase.channel("progress-updates-".concat(this.userId)).on("postgres_changes",{event:"INSERT",schema:"public",table:"progress_tracking",filter:"user_id=eq.".concat(this.userId)},e=>{console.log("Progress update received:",e);let t={userId:this.userId,action:e.new.action_type,points:e.new.points_awarded,category:e.new.category,timestamp:e.new.created_at,competencyData:{customerAnalysis:e.new.customer_analysis_score,valueCommunication:e.new.value_communication_score,salesExecution:e.new.sales_execution_score,overallScore:e.new.overall_score,totalPoints:e.new.total_points,currentLevel:{id:"foundation",name:"Foundation",points:0,nextLevel:"developing",previousLevel:null,color:"gray"},levelProgress:0,lastUpdated:new Date().toISOString(),baselineScores:{customerAnalysis:0,valueCommunication:0,salesExecution:0},levelHistory:[],toolUnlockStates:{icpUnlocked:!0,costCalculatorUnlocked:!1,businessCaseUnlocked:!1,resourcesUnlocked:!1,exportUnlocked:!1}},data:{customerAnalysis:e.new.customer_analysis_score,valueCommunication:e.new.value_communication_score,salesExecution:e.new.sales_execution_score,overallScore:e.new.overall_score,totalPoints:e.new.total_points,currentLevel:{id:"foundation",name:"Foundation",points:0,nextLevel:"developing",previousLevel:null,color:"gray"},levelProgress:0,lastUpdated:new Date().toISOString(),baselineScores:{customerAnalysis:0,valueCommunication:0,salesExecution:0},levelHistory:[],toolUnlockStates:{icpUnlocked:!0,costCalculatorUnlocked:!1,businessCaseUnlocked:!1,resourcesUnlocked:!1,exportUnlocked:!1}}};this.emit("progress_update",t)}).subscribe();this.channels.set("progress-updates",e)}async subscribeToMilestoneUpdates(){let e=this.supabase.channel("milestone-updates-".concat(this.userId)).on("postgres_changes",{event:"INSERT",schema:"public",table:"milestone_achievements",filter:"user_id=eq.".concat(this.userId)},e=>{console.log("Milestone achievement received:",e);let t={id:e.new.id,title:e.new.title,description:e.new.description,category:e.new.category,points:e.new.points,milestone:e.new.milestone_name||"Unknown Milestone",achievedAt:e.new.achieved_at};this.emit("milestone_achieved",{milestoneId:t.id,title:t.title,points:t.points})}).subscribe();this.channels.set("milestone-updates",e)}async subscribeToToolUnlocks(){let e=this.supabase.channel("tool-unlocks-".concat(this.userId)).on("postgres_changes",{event:"UPDATE",schema:"public",table:"competency_data",filter:"user_id=eq.".concat(this.userId)},e=>{let t=e.old,s=e.new,a=[];!t.cost_calculator_unlocked&&s.cost_calculator_unlocked&&a.push("costCalculator"),!t.business_case_unlocked&&s.business_case_unlocked&&a.push("businessCase"),!t.resources_unlocked&&s.resources_unlocked&&a.push("resources"),!t.export_unlocked&&s.export_unlocked&&a.push("export"),a.forEach(e=>{this.emit("tool_unlock",{toolName:e,unlockedAt:new Date().toISOString()})})}).subscribe();this.channels.set("tool-unlocks",e)}subscribe(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,[]),this.eventHandlers.get(e).push(t),()=>{let s=this.eventHandlers.get(e);if(s){let e=s.indexOf(t);e>-1&&s.splice(e,1)}}}emit(e,t){let s=this.eventHandlers.get(e);s&&s.forEach(e=>{try{e(t)}catch(e){console.error("Error in realtime event handler:",e)}})}async sendProgressUpdate(e){try{var t,s,a,n,l;let{error:o}=await this.supabase.from("progress_tracking").insert({user_id:this.userId,action_type:e.action,points_awarded:e.points,category:e.category,customer_analysis_score:null==(t=e.data)?void 0:t.customerAnalysis,value_communication_score:null==(s=e.data)?void 0:s.valueCommunication,sales_execution_score:null==(a=e.data)?void 0:a.salesExecution,overall_score:null==(n=e.data)?void 0:n.overallScore,total_points:null==(l=e.data)?void 0:l.totalPoints,created_at:e.timestamp});if(o)throw console.error("Error sending progress update:",o),o}catch(e){throw console.error("Error in sendProgressUpdate:",e),e}}async updateCompetencyData(e){try{let{error:t}=await this.supabase.from("competency_data").upsert({user_id:this.userId,customer_analysis:e.customerAnalysis,value_communication:e.valueCommunication,sales_execution:e.salesExecution,overall_score:e.overallScore,total_points:e.totalPoints,current_level:e.currentLevel.id,level_progress:e.levelProgress,cost_calculator_unlocked:e.toolUnlockStates.costCalculatorUnlocked,business_case_unlocked:e.toolUnlockStates.businessCaseUnlocked,resources_unlocked:e.toolUnlockStates.resourcesUnlocked,export_unlocked:e.toolUnlockStates.exportUnlocked,last_updated:e.lastUpdated});if(t)throw console.error("Error updating competency data:",t),t}catch(e){throw console.error("Error in updateCompetencyData:",e),e}}async getCompetencyData(){try{let{data:e,error:t}=await this.supabase.from("competency_data").select("*").eq("user_id",this.userId).single();if(t){if("PGRST116"===t.code)return null;throw console.error("Error getting competency data:",t),t}return{customerAnalysis:e.customer_analysis,valueCommunication:e.value_communication,salesExecution:e.sales_execution,overallScore:e.overall_score,currentLevel:this.getLevelById(e.current_level),totalPoints:e.total_points,levelProgress:e.level_progress,baselineScores:{customerAnalysis:e.baseline_customer_analysis||e.customer_analysis,valueCommunication:e.baseline_value_communication||e.value_communication,salesExecution:e.baseline_sales_execution||e.sales_execution},levelHistory:e.level_history||[],lastUpdated:e.last_updated,toolUnlockStates:{icpUnlocked:!0,costCalculatorUnlocked:e.cost_calculator_unlocked,businessCaseUnlocked:e.business_case_unlocked,resourcesUnlocked:e.resources_unlocked,exportUnlocked:e.export_unlocked}}}catch(e){throw console.error("Error in getCompetencyData:",e),e}}async getProgressHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;try{let{data:t,error:s}=await this.supabase.from("progress_tracking").select("*").eq("user_id",this.userId).order("created_at",{ascending:!1}).limit(e);if(s)throw console.error("Error getting progress history:",s),s;return t||[]}catch(e){throw console.error("Error in getProgressHistory:",e),e}}getLevelById(e){let t=[{id:"foundation",name:"Foundation Level",points:0,color:"#6B7280"},{id:"developing",name:"Developing Level",points:200,color:"#3B82F6"},{id:"intermediate",name:"Intermediate Level",points:400,color:"#10B981"},{id:"advanced",name:"Advanced Level",points:600,color:"#F59E0B"},{id:"expert",name:"Expert Level",points:800,color:"#EF4444"},{id:"master",name:"Master Level",points:1e3,color:"#8B5CF6"}];return t.find(t=>t.id===e)||t[0]}disconnect(){this.channels.forEach((e,t)=>{this.supabase.removeChannel(e),console.log("Disconnected channel: ".concat(t))}),this.channels.clear(),this.eventHandlers.clear()}isConnected(){return this.channels.size>0}constructor(e){this.channels=new Map,this.eventHandlers=new Map,this.supabase=(0,r.UU)(e.url,e.anonKey),this.userId=e.userId}}function c(e){let[t,s]=(0,a.useState)(null),[r,c]=(0,a.useState)(null),[u,d]=(0,a.useState)([]),[m,h]=(0,a.useState)(!0),[p,x]=(0,a.useState)(null),[g,y]=(0,a.useState)([]),v=(0,a.useRef)(null),b=(0,a.useRef)(null),j=(0,a.useRef)(null),[f,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)("closed"),C=(0,a.useCallback)(async()=>{try{h(!0),x(null);let t={customerAnalysis:45,valueCommunication:38,salesExecution:42,overallScore:42,currentLevel:n.e[0],totalPoints:0,levelProgress:0,baselineScores:{customerAnalysis:45,valueCommunication:38,salesExecution:42},levelHistory:[],lastUpdated:new Date().toISOString(),toolUnlockStates:{icpUnlocked:!0,costCalculatorUnlocked:!1,businessCaseUnlocked:!1,resourcesUnlocked:!1,exportUnlocked:!1}};s(t),v.current=new l(e,t,u),b.current=new o(e,t,u),j.current=new i({url:"https://your-project.supabase.co",anonKey:"your_supabase_anon_key_here",userId:e});let a=await v.current.calculateAnalytics();c(a),await j.current.initialize()}catch(e){console.error("Error initializing competency dashboard:",e),x(e instanceof Error?e.message:"Failed to initialize dashboard")}finally{h(!1)}},[e,u]),S=(0,a.useCallback)(e=>{let t={...e,id:"notification-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))};y(e=>[t,...e])},[]),_=(0,a.useCallback)(e=>{y(t=>t.filter(t=>t.id!==e))},[]),A=(0,a.useCallback)(async e=>{if(!b.current)throw Error("Progress service not initialized");return await b.current.trackProgress(e)},[]),U=(0,a.useCallback)(async()=>{if(v.current)try{let e=await v.current.calculateAnalytics();c(e)}catch(e){console.error("Error refreshing analytics:",e)}},[]),D=(0,a.useCallback)(e=>{s(t=>t?{...t,...e}:null)},[]),E=(0,a.useMemo)(()=>{if(!t)return{pointsGained:0,levelAdvancements:0,toolsUnlocked:0,competencyImprovements:{customerAnalysis:0,valueCommunication:0,salesExecution:0}};let e=t.baselineScores;return{pointsGained:t.totalPoints,levelAdvancements:t.levelHistory.length,toolsUnlocked:Object.values(t.toolUnlockStates).filter(Boolean).length,competencyImprovements:{customerAnalysis:t.customerAnalysis-e.customerAnalysis,valueCommunication:t.valueCommunication-e.valueCommunication,salesExecution:t.salesExecution-e.salesExecution}}},[t]),P=(0,a.useCallback)(()=>{if(!j.current)return;let e=j.current.subscribe("competency_update",e=>{console.log("Competency update received:",e),t&&s(t=>t?{...t,...e.data}:null)}),a=j.current.subscribe("progress_update",e=>{console.log("Progress update received:",e),d(s=>{var a,n,l,o,r,i;return[...s,{period:"realtime",score:(null==(a=e.data)?void 0:a.overallScore)||(null==t?void 0:t.overallScore)||0,change:0,velocity:{weekly:0,monthly:0,quarterly:0,period:"realtime",pointsGained:0},date:e.timestamp,customerAnalysis:(null==(n=e.data)?void 0:n.customerAnalysis)||(null==t?void 0:t.customerAnalysis)||0,valueCommunication:(null==(l=e.data)?void 0:l.valueCommunication)||(null==t?void 0:t.valueCommunication)||0,salesExecution:(null==(o=e.data)?void 0:o.salesExecution)||(null==t?void 0:t.salesExecution)||0,overallScore:(null==(r=e.data)?void 0:r.overallScore)||(null==t?void 0:t.overallScore)||0,points:(null==(i=e.data)?void 0:i.totalPoints)||(null==t?void 0:t.totalPoints)||0}]})}),n=j.current.subscribe("level_up",e=>{console.log("Level up notification:",e),S({type:"level_up",title:"Level Up!",message:"Congratulations! You've reached ".concat(e.newLevel," level!"),timestamp:new Date().toISOString(),read:!1})}),l=j.current.subscribe("tool_unlock",e=>{console.log("Tool unlock notification:",e),S({type:"tool_unlock",title:"New Tool Unlocked!",message:"".concat(e.toolName," is now available!"),timestamp:new Date().toISOString(),read:!1})}),o=j.current.subscribe("connection_state",e=>{k(e),N("open"===e)});return()=>{e(),a(),n(),l(),o()}},[t,S]);return(0,a.useEffect)(()=>{C()},[C]),(0,a.useEffect)(()=>{j.current&&t&&P()},[P]),(0,a.useEffect)(()=>()=>{j.current&&j.current.disconnect()},[]),{competencyData:t,analytics:r,progressHistory:u,loading:m,error:p,isConnected:f,connectionState:w,trackProgress:A,refreshAnalytics:U,updateCompetencyData:D,notifications:g,dismissNotification:_,progressSummary:E}}}}]);