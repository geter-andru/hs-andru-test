"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_lib_services_authService_ts"],{

/***/ "(app-pages-browser)/./lib/services/authService.ts":
/*!*************************************!*\
  !*** ./lib/services/authService.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authService: () => (/* binding */ authService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(app-pages-browser)/./node_modules/js-cookie/dist/js.cookie.mjs\");\n/* harmony import */ var _supabase_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../supabase/client */ \"(app-pages-browser)/./lib/supabase/client.ts\");\n// Enhanced Auth Service for Next.js Platform\n// Based on React SPA's authService.js patterns with Supabase integration\n\n\nclass AuthService {\n    // Load session from cookies on initialization\n    loadSessionFromStorage() {\n        if (false) {}\n        try {\n            const sessionData = js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(this.SESSION_COOKIE);\n            if (sessionData) {\n                this.session = JSON.parse(sessionData);\n                // Validate session hasn't expired\n                if (this.session && this.session.expiresAt < Date.now()) {\n                    this.clearSession();\n                }\n            }\n        } catch (error) {\n            console.warn('Failed to load session from storage:', error);\n            this.clearSession();\n        }\n    }\n    // Save session to cookies\n    saveSessionToStorage(session) {\n        if (false) {}\n        try {\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(this.TOKEN_COOKIE, session.accessToken, {\n                expires: 1\n            });\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(this.REFRESH_COOKIE, session.refreshToken, {\n                expires: 7\n            });\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(this.CUSTOMER_ID_COOKIE, session.customerId, {\n                expires: 7\n            });\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(this.SESSION_COOKIE, JSON.stringify(session), {\n                expires: 1\n            });\n        } catch (error) {\n            console.error('Failed to save session to storage:', error);\n        }\n    }\n    // Clear session from cookies\n    clearSession() {\n        this.session = null;\n        if (false) {}\n        js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(this.TOKEN_COOKIE);\n        js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(this.REFRESH_COOKIE);\n        js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(this.CUSTOMER_ID_COOKIE);\n        js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove(this.SESSION_COOKIE);\n    }\n    // Supabase authentication methods\n    async loginWithSupabase() {\n        try {\n            var _supabaseUser_user_metadata, _supabaseUser_user_metadata1, _supabaseUser_user_metadata2;\n            const supabaseUser = await (0,_supabase_client__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n            if (!supabaseUser) {\n                return {\n                    success: false,\n                    error: 'No Supabase user found. Please sign in.'\n                };\n            }\n            // Create customer profile from Supabase user\n            const customer = {\n                id: 'SUPABASE_USER',\n                customerId: 'SUPABASE_USER',\n                name: ((_supabaseUser_user_metadata = supabaseUser.user_metadata) === null || _supabaseUser_user_metadata === void 0 ? void 0 : _supabaseUser_user_metadata.full_name) || supabaseUser.email || 'Supabase User',\n                customerName: ((_supabaseUser_user_metadata1 = supabaseUser.user_metadata) === null || _supabaseUser_user_metadata1 === void 0 ? void 0 : _supabaseUser_user_metadata1.full_name) || supabaseUser.email || 'Supabase User',\n                email: supabaseUser.email || '',\n                company: ((_supabaseUser_user_metadata2 = supabaseUser.user_metadata) === null || _supabaseUser_user_metadata2 === void 0 ? void 0 : _supabaseUser_user_metadata2.company) || 'Your Company',\n                status: 'active',\n                isAdmin: false,\n                demoMode: false,\n                hasPersonalizedICP: true,\n                hasDetailedAnalysis: true,\n                paymentStatus: 'Completed' // Supabase users get full access\n            };\n            // Create session\n            const session = {\n                customerId: 'SUPABASE_USER',\n                accessToken: 'supabase-auth',\n                refreshToken: \"supabase_refresh_\".concat(Date.now()),\n                expiresAt: Date.now() + 24 * 60 * 60 * 1000,\n                customer\n            };\n            this.session = session;\n            this.saveSessionToStorage(session);\n            return {\n                success: true,\n                data: customer\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: 'Supabase authentication failed. Please try again.'\n            };\n        }\n    }\n    // Check if user is authenticated via Supabase\n    async isSupabaseAuthenticated() {\n        try {\n            const user = await (0,_supabase_client__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n            return !!user;\n        } catch (e) {\n            return false;\n        }\n    }\n    // Enhanced login with multiple authentication patterns\n    async login(customerId, accessToken) {\n        try {\n            // Simulate API delay\n            await new Promise((resolve)=>setTimeout(resolve, 500));\n            const customer = this.getCustomerProfile(customerId);\n            if (!customer) {\n                return {\n                    success: false,\n                    error: 'Customer not found. Please check your Customer ID.'\n                };\n            }\n            // Validate admin access tokens\n            if (customer.isAdmin && accessToken) {\n                const validAdminTokens = [\n                    'admin-demo-token-2025',\n                    'test-token-123456'\n                ];\n                if (!validAdminTokens.includes(accessToken)) {\n                    return {\n                        success: false,\n                        error: 'Invalid admin access token.'\n                    };\n                }\n            }\n            // Create session\n            const session = {\n                customerId,\n                accessToken: accessToken || \"token_\".concat(customerId, \"_\").concat(Date.now()),\n                refreshToken: \"refresh_\".concat(customerId, \"_\").concat(Date.now()),\n                expiresAt: Date.now() + 24 * 60 * 60 * 1000,\n                customer\n            };\n            this.session = session;\n            this.saveSessionToStorage(session);\n            return {\n                success: true,\n                data: customer\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: 'Login failed. Please try again.'\n            };\n        }\n    }\n    // Logout and clear session\n    logout() {\n        this.clearSession();\n        if (true) {\n            window.location.href = '/login';\n        }\n    }\n    // Check if user is authenticated\n    isAuthenticated() {\n        if (!this.session) return false;\n        if (this.session.expiresAt < Date.now()) {\n            this.clearSession();\n            return false;\n        }\n        return true;\n    }\n    // Get current session\n    getCurrentSession() {\n        if (!this.isAuthenticated()) return null;\n        return this.session;\n    }\n    // Get current customer\n    getCurrentCustomer() {\n        const session = this.getCurrentSession();\n        return (session === null || session === void 0 ? void 0 : session.customer) || null;\n    }\n    // Get customer ID\n    getCustomerId() {\n        const session = this.getCurrentSession();\n        return session === null || session === void 0 ? void 0 : session.customerId;\n    }\n    // Get access token\n    getAccessToken() {\n        const session = this.getCurrentSession();\n        return session === null || session === void 0 ? void 0 : session.accessToken;\n    }\n    // Admin access checks\n    isAdmin() {\n        const customer = this.getCurrentCustomer();\n        return (customer === null || customer === void 0 ? void 0 : customer.isAdmin) === true;\n    }\n    hasAdminAccess() {\n        const customer = this.getCurrentCustomer();\n        return (customer === null || customer === void 0 ? void 0 : customer.isAdmin) === true && (customer === null || customer === void 0 ? void 0 : customer.adminAccess) === true;\n    }\n    // Payment status checks\n    hasCompletedPayment() {\n        const customer = this.getCurrentCustomer();\n        // Admin users always have access\n        if (customer === null || customer === void 0 ? void 0 : customer.isAdmin) return true;\n        return (customer === null || customer === void 0 ? void 0 : customer.paymentStatus) === 'Completed';\n    }\n    // Tool access validation\n    hasToolAccess(toolName) {\n        const customer = this.getCurrentCustomer();\n        if (!customer) return false;\n        // Admin users have access to all tools\n        if (customer.isAdmin) return true;\n        // Check payment status for regular users\n        if (!this.hasCompletedPayment()) return false;\n        // Tool-specific access logic\n        switch(toolName){\n            case 'icp':\n                return customer.hasPersonalizedICP || false;\n            case 'cost-calculator':\n                return true; // Available to all paid users\n            case 'business-case':\n                return customer.hasDetailedAnalysis || false;\n            default:\n                return false;\n        }\n    }\n    // Refresh authentication token\n    async refreshToken() {\n        if (!this.session) return false;\n        try {\n            // Simulate token refresh API call\n            const newToken = \"refreshed_token_\".concat(this.session.customerId, \"_\").concat(Date.now());\n            this.session.accessToken = newToken;\n            this.session.expiresAt = Date.now() + 24 * 60 * 60 * 1000;\n            this.saveSessionToStorage(this.session);\n            return true;\n        } catch (error) {\n            console.error('Failed to refresh token:', error);\n            this.clearSession();\n            return false;\n        }\n    }\n    // Session validation and extension\n    async validateSession() {\n        if (!this.session) return false;\n        // If session expires in less than 1 hour, try to refresh\n        const oneHour = 60 * 60 * 1000;\n        if (this.session.expiresAt - Date.now() < oneHour) {\n            return await this.refreshToken();\n        }\n        return true;\n    }\n    // Get customer profiles (mock data)\n    getCustomerProfile(customerId) {\n        const profiles = {\n            'CUST_2': {\n                id: 'CUST_2',\n                customerId: 'CUST_2',\n                name: 'John Demo',\n                customerName: 'John Demo',\n                email: 'john@example.com',\n                company: 'Demo Company',\n                status: 'active',\n                isAdmin: false,\n                demoMode: false,\n                hasPersonalizedICP: true,\n                hasDetailedAnalysis: false,\n                paymentStatus: 'Completed'\n            },\n            'CUST_4': {\n                id: 'CUST_4',\n                customerId: 'CUST_4',\n                name: 'Admin Demo',\n                customerName: 'Platform Administrator',\n                email: 'admin@example.com',\n                company: 'H&S Revenue Intelligence',\n                status: 'admin',\n                isAdmin: true,\n                demoMode: true,\n                hasPersonalizedICP: true,\n                hasDetailedAnalysis: true,\n                adminAccess: true,\n                paymentStatus: 'Completed'\n            },\n            'dru78DR9789SDF862': {\n                id: 'dru78DR9789SDF862',\n                customerId: 'dru78DR9789SDF862',\n                name: 'Geter',\n                customerName: 'Geter',\n                email: 'geter@hs-platform.com',\n                company: 'H&S Platform',\n                status: 'admin',\n                isAdmin: true,\n                demoMode: true,\n                hasPersonalizedICP: true,\n                hasDetailedAnalysis: true,\n                adminAccess: true,\n                paymentStatus: 'Completed'\n            },\n            'CUST_02': {\n                id: 'CUST_02',\n                customerId: 'CUST_02',\n                name: 'Test User',\n                customerName: 'Test User',\n                email: 'test@example.com',\n                company: 'Test Company',\n                status: 'test',\n                isAdmin: false,\n                demoMode: true,\n                hasPersonalizedICP: false,\n                hasDetailedAnalysis: false,\n                paymentStatus: 'Pending'\n            }\n        };\n        return profiles[customerId] || null;\n    }\n    // Development utilities\n    isDemoMode() {\n        const customer = this.getCurrentCustomer();\n        return (customer === null || customer === void 0 ? void 0 : customer.demoMode) === true;\n    }\n    getSessionInfo() {\n        var _this_session;\n        return {\n            isAuthenticated: this.isAuthenticated(),\n            customerId: this.getCustomerId(),\n            isAdmin: this.isAdmin(),\n            hasAdminAccess: this.hasAdminAccess(),\n            hasCompletedPayment: this.hasCompletedPayment(),\n            isDemoMode: this.isDemoMode(),\n            sessionExpiresAt: (_this_session = this.session) === null || _this_session === void 0 ? void 0 : _this_session.expiresAt,\n            sessionValid: this.session ? this.session.expiresAt > Date.now() : false\n        };\n    }\n    // Extract credentials from URL parameters\n    extractCredentials(searchParams) {\n        const customerId = searchParams.get('customerId') || '';\n        const accessToken = searchParams.get('token') || '';\n        if (!customerId || !accessToken) {\n            return null;\n        }\n        return {\n            customerId,\n            accessToken\n        };\n    }\n    // Validate credentials using existing authentication logic\n    async validateCredentials(customerId, accessToken) {\n        try {\n            // Use existing authentication method for admin users\n            if (customerId === 'dru78DR9789SDF862' && accessToken === 'admin-demo-token-2025') {\n                const adminData = await this.getAdminProfile();\n                return {\n                    valid: true,\n                    customerData: adminData\n                };\n            }\n            // For regular customers, implement proper validation\n            // This would need integration with actual customer database\n            return {\n                valid: false,\n                error: 'Customer validation not implemented for non-admin users'\n            };\n        } catch (error) {\n            return {\n                valid: false,\n                error: \"Validation failed: \".concat(error.message)\n            };\n        }\n    }\n    // Generate session from validated credentials\n    async generateSession(customerId, customerData) {\n        const sessionData = {\n            customerId,\n            accessToken: \"token_\".concat(Date.now()),\n            refreshToken: \"refresh_\".concat(Date.now()),\n            expiresAt: Date.now() + 24 * 60 * 60 * 1000,\n            customer: customerData\n        };\n        this.session = sessionData;\n        this.saveSessionToStorage();\n        return sessionData;\n    }\n    // Refresh existing session\n    async refreshSession() {\n        if (this.session && this.session.expiresAt > Date.now()) {\n            this.session.expiresAt = Date.now() + 24 * 60 * 60 * 1000; // Extend by 24 hours\n            this.saveSessionToStorage();\n        }\n    }\n    constructor(){\n        this.session = null;\n        // Cookie names\n        this.TOKEN_COOKIE = 'hs_auth_token';\n        this.REFRESH_COOKIE = 'hs_refresh_token';\n        this.CUSTOMER_ID_COOKIE = 'hs_customer_id';\n        this.SESSION_COOKIE = 'hs_session';\n        if (AuthService.instance) {\n            return AuthService.instance;\n        }\n        AuthService.instance = this;\n        this.loadSessionFromStorage();\n    }\n}\n// Export singleton instance\nconst authService = new AuthService();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (authService);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9zZXJ2aWNlcy9hdXRoU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsNkNBQTZDO0FBQzdDLHlFQUF5RTtBQUV6QztBQUNpRDtBQTBCakYsTUFBTUc7SUFrQkosOENBQThDO0lBQ3RDQyx5QkFBK0I7UUFDckMsSUFBSSxLQUE2QixFQUFFLEVBQU87UUFFMUMsSUFBSTtZQUNGLE1BQU1DLGNBQWNMLGlEQUFPQSxDQUFDTSxHQUFHLENBQUMsSUFBSSxDQUFDQyxjQUFjO1lBQ25ELElBQUlGLGFBQWE7Z0JBQ2YsSUFBSSxDQUFDRyxPQUFPLEdBQUdDLEtBQUtDLEtBQUssQ0FBQ0w7Z0JBQzFCLGtDQUFrQztnQkFDbEMsSUFBSSxJQUFJLENBQUNHLE9BQU8sSUFBSSxJQUFJLENBQUNBLE9BQU8sQ0FBQ0csU0FBUyxHQUFHQyxLQUFLQyxHQUFHLElBQUk7b0JBQ3ZELElBQUksQ0FBQ0MsWUFBWTtnQkFDbkI7WUFDRjtRQUNGLEVBQUUsT0FBT0MsT0FBTztZQUNkQyxRQUFRQyxJQUFJLENBQUMsd0NBQXdDRjtZQUNyRCxJQUFJLENBQUNELFlBQVk7UUFDbkI7SUFDRjtJQUVBLDBCQUEwQjtJQUNsQkkscUJBQXFCVixPQUFvQixFQUFRO1FBQ3ZELElBQUksS0FBNkIsRUFBRSxFQUFPO1FBRTFDLElBQUk7WUFDRlIsaURBQU9BLENBQUNtQixHQUFHLENBQUMsSUFBSSxDQUFDQyxZQUFZLEVBQUVaLFFBQVFhLFdBQVcsRUFBRTtnQkFBRUMsU0FBUztZQUFFO1lBQ2pFdEIsaURBQU9BLENBQUNtQixHQUFHLENBQUMsSUFBSSxDQUFDSSxjQUFjLEVBQUVmLFFBQVFnQixZQUFZLEVBQUU7Z0JBQUVGLFNBQVM7WUFBRTtZQUNwRXRCLGlEQUFPQSxDQUFDbUIsR0FBRyxDQUFDLElBQUksQ0FBQ00sa0JBQWtCLEVBQUVqQixRQUFRa0IsVUFBVSxFQUFFO2dCQUFFSixTQUFTO1lBQUU7WUFDdEV0QixpREFBT0EsQ0FBQ21C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LWFuZHJ1LXRlc3QvbW9kZXJuLXBsYXRmb3JtL2xpYi9zZXJ2aWNlcy9hdXRoU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBFbmhhbmNlZCBBdXRoIFNlcnZpY2UgZm9yIE5leHQuanMgUGxhdGZvcm1cbi8vIEJhc2VkIG9uIFJlYWN0IFNQQSdzIGF1dGhTZXJ2aWNlLmpzIHBhdHRlcm5zIHdpdGggU3VwYWJhc2UgaW50ZWdyYXRpb25cblxuaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJztcbmltcG9ydCB7IHN1cGFiYXNlLCBnZXRDdXJyZW50VXNlciBhcyBnZXRTdXBhYmFzZVVzZXIgfSBmcm9tICcuLi9zdXBhYmFzZS9jbGllbnQnO1xuXG5pbnRlcmZhY2UgQXV0aFNlc3Npb24ge1xuICBjdXN0b21lcklkOiBzdHJpbmc7XG4gIGFjY2Vzc1Rva2VuOiBzdHJpbmc7XG4gIHJlZnJlc2hUb2tlbjogc3RyaW5nO1xuICBleHBpcmVzQXQ6IG51bWJlcjtcbiAgY3VzdG9tZXI6IEN1c3RvbWVyUHJvZmlsZSB8IG51bGw7XG59XG5cbmludGVyZmFjZSBDdXN0b21lclByb2ZpbGUge1xuICBpZDogc3RyaW5nO1xuICBjdXN0b21lcklkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgY3VzdG9tZXJOYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGNvbXBhbnk6IHN0cmluZztcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGlzQWRtaW4/OiBib29sZWFuO1xuICBkZW1vTW9kZT86IGJvb2xlYW47XG4gIGhhc1BlcnNvbmFsaXplZElDUD86IGJvb2xlYW47XG4gIGhhc0RldGFpbGVkQW5hbHlzaXM/OiBib29sZWFuO1xuICBhZG1pbkFjY2Vzcz86IGJvb2xlYW47XG4gIHBheW1lbnRTdGF0dXM/OiBzdHJpbmc7XG59XG5cbmNsYXNzIEF1dGhTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEF1dGhTZXJ2aWNlO1xuICBwcml2YXRlIHNlc3Npb246IEF1dGhTZXNzaW9uIHwgbnVsbCA9IG51bGw7XG4gIFxuICAvLyBDb29raWUgbmFtZXNcbiAgcHJpdmF0ZSByZWFkb25seSBUT0tFTl9DT09LSUUgPSAnaHNfYXV0aF90b2tlbic7XG4gIHByaXZhdGUgcmVhZG9ubHkgUkVGUkVTSF9DT09LSUUgPSAnaHNfcmVmcmVzaF90b2tlbic7XG4gIHByaXZhdGUgcmVhZG9ubHkgQ1VTVE9NRVJfSURfQ09PS0lFID0gJ2hzX2N1c3RvbWVyX2lkJztcbiAgcHJpdmF0ZSByZWFkb25seSBTRVNTSU9OX0NPT0tJRSA9ICdoc19zZXNzaW9uJztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAoQXV0aFNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiBBdXRoU2VydmljZS5pbnN0YW5jZTtcbiAgICB9XG4gICAgQXV0aFNlcnZpY2UuaW5zdGFuY2UgPSB0aGlzO1xuICAgIHRoaXMubG9hZFNlc3Npb25Gcm9tU3RvcmFnZSgpO1xuICB9XG5cbiAgLy8gTG9hZCBzZXNzaW9uIGZyb20gY29va2llcyBvbiBpbml0aWFsaXphdGlvblxuICBwcml2YXRlIGxvYWRTZXNzaW9uRnJvbVN0b3JhZ2UoKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gQ29va2llcy5nZXQodGhpcy5TRVNTSU9OX0NPT0tJRSk7XG4gICAgICBpZiAoc2Vzc2lvbkRhdGEpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gSlNPTi5wYXJzZShzZXNzaW9uRGF0YSk7XG4gICAgICAgIC8vIFZhbGlkYXRlIHNlc3Npb24gaGFzbid0IGV4cGlyZWRcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbiAmJiB0aGlzLnNlc3Npb24uZXhwaXJlc0F0IDwgRGF0ZS5ub3coKSkge1xuICAgICAgICAgIHRoaXMuY2xlYXJTZXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gbG9hZCBzZXNzaW9uIGZyb20gc3RvcmFnZTonLCBlcnJvcik7XG4gICAgICB0aGlzLmNsZWFyU2Vzc2lvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNhdmUgc2Vzc2lvbiB0byBjb29raWVzXG4gIHByaXZhdGUgc2F2ZVNlc3Npb25Ub1N0b3JhZ2Uoc2Vzc2lvbjogQXV0aFNlc3Npb24pOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgQ29va2llcy5zZXQodGhpcy5UT0tFTl9DT09LSUUsIHNlc3Npb24uYWNjZXNzVG9rZW4sIHsgZXhwaXJlczogMSB9KTtcbiAgICAgIENvb2tpZXMuc2V0KHRoaXMuUkVGUkVTSF9DT09LSUUsIHNlc3Npb24ucmVmcmVzaFRva2VuLCB7IGV4cGlyZXM6IDcgfSk7XG4gICAgICBDb29raWVzLnNldCh0aGlzLkNVU1RPTUVSX0lEX0NPT0tJRSwgc2Vzc2lvbi5jdXN0b21lcklkLCB7IGV4cGlyZXM6IDcgfSk7XG4gICAgICBDb29raWVzLnNldCh0aGlzLlNFU1NJT05fQ09PS0lFLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uKSwgeyBleHBpcmVzOiAxIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBzZXNzaW9uIHRvIHN0b3JhZ2U6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFyIHNlc3Npb24gZnJvbSBjb29raWVzXG4gIHByaXZhdGUgY2xlYXJTZXNzaW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2Vzc2lvbiA9IG51bGw7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgXG4gICAgQ29va2llcy5yZW1vdmUodGhpcy5UT0tFTl9DT09LSUUpO1xuICAgIENvb2tpZXMucmVtb3ZlKHRoaXMuUkVGUkVTSF9DT09LSUUpO1xuICAgIENvb2tpZXMucmVtb3ZlKHRoaXMuQ1VTVE9NRVJfSURfQ09PS0lFKTtcbiAgICBDb29raWVzLnJlbW92ZSh0aGlzLlNFU1NJT05fQ09PS0lFKTtcbiAgfVxuXG4gIC8vIFN1cGFiYXNlIGF1dGhlbnRpY2F0aW9uIG1ldGhvZHNcbiAgYXN5bmMgbG9naW5XaXRoU3VwYWJhc2UoKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGRhdGE/OiBDdXN0b21lclByb2ZpbGU7IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VwYWJhc2VVc2VyID0gYXdhaXQgZ2V0U3VwYWJhc2VVc2VyKCk7XG4gICAgICBpZiAoIXN1cGFiYXNlVXNlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnTm8gU3VwYWJhc2UgdXNlciBmb3VuZC4gUGxlYXNlIHNpZ24gaW4uJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgY3VzdG9tZXIgcHJvZmlsZSBmcm9tIFN1cGFiYXNlIHVzZXJcbiAgICAgIGNvbnN0IGN1c3RvbWVyOiBDdXN0b21lclByb2ZpbGUgPSB7XG4gICAgICAgIGlkOiAnU1VQQUJBU0VfVVNFUicsXG4gICAgICAgIGN1c3RvbWVySWQ6ICdTVVBBQkFTRV9VU0VSJyxcbiAgICAgICAgbmFtZTogc3VwYWJhc2VVc2VyLnVzZXJfbWV0YWRhdGE/LmZ1bGxfbmFtZSB8fCBzdXBhYmFzZVVzZXIuZW1haWwgfHwgJ1N1cGFiYXNlIFVzZXInLFxuICAgICAgICBjdXN0b21lck5hbWU6IHN1cGFiYXNlVXNlci51c2VyX21ldGFkYXRhPy5mdWxsX25hbWUgfHwgc3VwYWJhc2VVc2VyLmVtYWlsIHx8ICdTdXBhYmFzZSBVc2VyJyxcbiAgICAgICAgZW1haWw6IHN1cGFiYXNlVXNlci5lbWFpbCB8fCAnJyxcbiAgICAgICAgY29tcGFueTogc3VwYWJhc2VVc2VyLnVzZXJfbWV0YWRhdGE/LmNvbXBhbnkgfHwgJ1lvdXIgQ29tcGFueScsXG4gICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICAgIGlzQWRtaW46IGZhbHNlLFxuICAgICAgICBkZW1vTW9kZTogZmFsc2UsXG4gICAgICAgIGhhc1BlcnNvbmFsaXplZElDUDogdHJ1ZSxcbiAgICAgICAgaGFzRGV0YWlsZWRBbmFseXNpczogdHJ1ZSxcbiAgICAgICAgcGF5bWVudFN0YXR1czogJ0NvbXBsZXRlZCcgLy8gU3VwYWJhc2UgdXNlcnMgZ2V0IGZ1bGwgYWNjZXNzXG4gICAgICB9O1xuXG4gICAgICAvLyBDcmVhdGUgc2Vzc2lvblxuICAgICAgY29uc3Qgc2Vzc2lvbjogQXV0aFNlc3Npb24gPSB7XG4gICAgICAgIGN1c3RvbWVySWQ6ICdTVVBBQkFTRV9VU0VSJyxcbiAgICAgICAgYWNjZXNzVG9rZW46ICdzdXBhYmFzZS1hdXRoJyxcbiAgICAgICAgcmVmcmVzaFRva2VuOiBgc3VwYWJhc2VfcmVmcmVzaF8ke0RhdGUubm93KCl9YCxcbiAgICAgICAgZXhwaXJlc0F0OiBEYXRlLm5vdygpICsgKDI0ICogNjAgKiA2MCAqIDEwMDApLCAvLyAyNCBob3Vyc1xuICAgICAgICBjdXN0b21lclxuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgIHRoaXMuc2F2ZVNlc3Npb25Ub1N0b3JhZ2Uoc2Vzc2lvbik7XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGN1c3RvbWVyIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6ICdTdXBhYmFzZSBhdXRoZW50aWNhdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkIHZpYSBTdXBhYmFzZVxuICBhc3luYyBpc1N1cGFiYXNlQXV0aGVudGljYXRlZCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGdldFN1cGFiYXNlVXNlcigpO1xuICAgICAgcmV0dXJuICEhdXNlcjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBFbmhhbmNlZCBsb2dpbiB3aXRoIG11bHRpcGxlIGF1dGhlbnRpY2F0aW9uIHBhdHRlcm5zXG4gIGFzeW5jIGxvZ2luKGN1c3RvbWVySWQ6IHN0cmluZywgYWNjZXNzVG9rZW4/OiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZGF0YT86IEN1c3RvbWVyUHJvZmlsZTsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBTaW11bGF0ZSBBUEkgZGVsYXlcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgIFxuICAgICAgY29uc3QgY3VzdG9tZXIgPSB0aGlzLmdldEN1c3RvbWVyUHJvZmlsZShjdXN0b21lcklkKTtcbiAgICAgIGlmICghY3VzdG9tZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0N1c3RvbWVyIG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHlvdXIgQ3VzdG9tZXIgSUQuJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBhZG1pbiBhY2Nlc3MgdG9rZW5zXG4gICAgICBpZiAoY3VzdG9tZXIuaXNBZG1pbiAmJiBhY2Nlc3NUb2tlbikge1xuICAgICAgICBjb25zdCB2YWxpZEFkbWluVG9rZW5zID0gWydhZG1pbi1kZW1vLXRva2VuLTIwMjUnLCAndGVzdC10b2tlbi0xMjM0NTYnXTtcbiAgICAgICAgaWYgKCF2YWxpZEFkbWluVG9rZW5zLmluY2x1ZGVzKGFjY2Vzc1Rva2VuKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBhZG1pbiBhY2Nlc3MgdG9rZW4uJ1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHNlc3Npb25cbiAgICAgIGNvbnN0IHNlc3Npb246IEF1dGhTZXNzaW9uID0ge1xuICAgICAgICBjdXN0b21lcklkLFxuICAgICAgICBhY2Nlc3NUb2tlbjogYWNjZXNzVG9rZW4gfHwgYHRva2VuXyR7Y3VzdG9tZXJJZH1fJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHJlZnJlc2hUb2tlbjogYHJlZnJlc2hfJHtjdXN0b21lcklkfV8ke0RhdGUubm93KCl9YCxcbiAgICAgICAgZXhwaXJlc0F0OiBEYXRlLm5vdygpICsgKDI0ICogNjAgKiA2MCAqIDEwMDApLCAvLyAyNCBob3Vyc1xuICAgICAgICBjdXN0b21lclxuICAgICAgfTtcblxuICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgIHRoaXMuc2F2ZVNlc3Npb25Ub1N0b3JhZ2Uoc2Vzc2lvbik7XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGN1c3RvbWVyIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6ICdMb2dpbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gTG9nb3V0IGFuZCBjbGVhciBzZXNzaW9uXG4gIGxvZ291dCgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyU2Vzc2lvbigpO1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJztcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAgaXNBdXRoZW50aWNhdGVkKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5zZXNzaW9uKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHRoaXMuc2Vzc2lvbi5leHBpcmVzQXQgPCBEYXRlLm5vdygpKSB7XG4gICAgICB0aGlzLmNsZWFyU2Vzc2lvbigpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIEdldCBjdXJyZW50IHNlc3Npb25cbiAgZ2V0Q3VycmVudFNlc3Npb24oKTogQXV0aFNlc3Npb24gfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuaXNBdXRoZW50aWNhdGVkKCkpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB0aGlzLnNlc3Npb247XG4gIH1cblxuICAvLyBHZXQgY3VycmVudCBjdXN0b21lclxuICBnZXRDdXJyZW50Q3VzdG9tZXIoKTogQ3VzdG9tZXJQcm9maWxlIHwgbnVsbCB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuZ2V0Q3VycmVudFNlc3Npb24oKTtcbiAgICByZXR1cm4gc2Vzc2lvbj8uY3VzdG9tZXIgfHwgbnVsbDtcbiAgfVxuXG4gIC8vIEdldCBjdXN0b21lciBJRFxuICBnZXRDdXN0b21lcklkKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuZ2V0Q3VycmVudFNlc3Npb24oKTtcbiAgICByZXR1cm4gc2Vzc2lvbj8uY3VzdG9tZXJJZDtcbiAgfVxuXG4gIC8vIEdldCBhY2Nlc3MgdG9rZW5cbiAgZ2V0QWNjZXNzVG9rZW4oKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5nZXRDdXJyZW50U2Vzc2lvbigpO1xuICAgIHJldHVybiBzZXNzaW9uPy5hY2Nlc3NUb2tlbjtcbiAgfVxuXG4gIC8vIEFkbWluIGFjY2VzcyBjaGVja3NcbiAgaXNBZG1pbigpOiBib29sZWFuIHtcbiAgICBjb25zdCBjdXN0b21lciA9IHRoaXMuZ2V0Q3VycmVudEN1c3RvbWVyKCk7XG4gICAgcmV0dXJuIGN1c3RvbWVyPy5pc0FkbWluID09PSB0cnVlO1xuICB9XG5cbiAgaGFzQWRtaW5BY2Nlc3MoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgY3VzdG9tZXIgPSB0aGlzLmdldEN1cnJlbnRDdXN0b21lcigpO1xuICAgIHJldHVybiBjdXN0b21lcj8uaXNBZG1pbiA9PT0gdHJ1ZSAmJiBjdXN0b21lcj8uYWRtaW5BY2Nlc3MgPT09IHRydWU7XG4gIH1cblxuICAvLyBQYXltZW50IHN0YXR1cyBjaGVja3NcbiAgaGFzQ29tcGxldGVkUGF5bWVudCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBjdXN0b21lciA9IHRoaXMuZ2V0Q3VycmVudEN1c3RvbWVyKCk7XG4gICAgLy8gQWRtaW4gdXNlcnMgYWx3YXlzIGhhdmUgYWNjZXNzXG4gICAgaWYgKGN1c3RvbWVyPy5pc0FkbWluKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gY3VzdG9tZXI/LnBheW1lbnRTdGF0dXMgPT09ICdDb21wbGV0ZWQnO1xuICB9XG5cbiAgLy8gVG9vbCBhY2Nlc3MgdmFsaWRhdGlvblxuICBoYXNUb29sQWNjZXNzKHRvb2xOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBjdXN0b21lciA9IHRoaXMuZ2V0Q3VycmVudEN1c3RvbWVyKCk7XG4gICAgaWYgKCFjdXN0b21lcikgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIC8vIEFkbWluIHVzZXJzIGhhdmUgYWNjZXNzIHRvIGFsbCB0b29sc1xuICAgIGlmIChjdXN0b21lci5pc0FkbWluKSByZXR1cm4gdHJ1ZTtcbiAgICBcbiAgICAvLyBDaGVjayBwYXltZW50IHN0YXR1cyBmb3IgcmVndWxhciB1c2Vyc1xuICAgIGlmICghdGhpcy5oYXNDb21wbGV0ZWRQYXltZW50KCkpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAvLyBUb29sLXNwZWNpZmljIGFjY2VzcyBsb2dpY1xuICAgIHN3aXRjaCAodG9vbE5hbWUpIHtcbiAgICAgIGNhc2UgJ2ljcCc6XG4gICAgICAgIHJldHVybiBjdXN0b21lci5oYXNQZXJzb25hbGl6ZWRJQ1AgfHwgZmFsc2U7XG4gICAgICBjYXNlICdjb3N0LWNhbGN1bGF0b3InOlxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQXZhaWxhYmxlIHRvIGFsbCBwYWlkIHVzZXJzXG4gICAgICBjYXNlICdidXNpbmVzcy1jYXNlJzpcbiAgICAgICAgcmV0dXJuIGN1c3RvbWVyLmhhc0RldGFpbGVkQW5hbHlzaXMgfHwgZmFsc2U7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gUmVmcmVzaCBhdXRoZW50aWNhdGlvbiB0b2tlblxuICBhc3luYyByZWZyZXNoVG9rZW4oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLnNlc3Npb24pIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gU2ltdWxhdGUgdG9rZW4gcmVmcmVzaCBBUEkgY2FsbFxuICAgICAgY29uc3QgbmV3VG9rZW4gPSBgcmVmcmVzaGVkX3Rva2VuXyR7dGhpcy5zZXNzaW9uLmN1c3RvbWVySWR9XyR7RGF0ZS5ub3coKX1gO1xuICAgICAgdGhpcy5zZXNzaW9uLmFjY2Vzc1Rva2VuID0gbmV3VG9rZW47XG4gICAgICB0aGlzLnNlc3Npb24uZXhwaXJlc0F0ID0gRGF0ZS5ub3coKSArICgyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICAgIFxuICAgICAgdGhpcy5zYXZlU2Vzc2lvblRvU3RvcmFnZSh0aGlzLnNlc3Npb24pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZWZyZXNoIHRva2VuOicsIGVycm9yKTtcbiAgICAgIHRoaXMuY2xlYXJTZXNzaW9uKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gU2Vzc2lvbiB2YWxpZGF0aW9uIGFuZCBleHRlbnNpb25cbiAgYXN5bmMgdmFsaWRhdGVTZXNzaW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICghdGhpcy5zZXNzaW9uKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gSWYgc2Vzc2lvbiBleHBpcmVzIGluIGxlc3MgdGhhbiAxIGhvdXIsIHRyeSB0byByZWZyZXNoXG4gICAgY29uc3Qgb25lSG91ciA9IDYwICogNjAgKiAxMDAwO1xuICAgIGlmICh0aGlzLnNlc3Npb24uZXhwaXJlc0F0IC0gRGF0ZS5ub3coKSA8IG9uZUhvdXIpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlZnJlc2hUb2tlbigpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIEdldCBjdXN0b21lciBwcm9maWxlcyAobW9jayBkYXRhKVxuICBwcml2YXRlIGdldEN1c3RvbWVyUHJvZmlsZShjdXN0b21lcklkOiBzdHJpbmcpOiBDdXN0b21lclByb2ZpbGUgfCBudWxsIHtcbiAgICBjb25zdCBwcm9maWxlczogUmVjb3JkPHN0cmluZywgQ3VzdG9tZXJQcm9maWxlPiA9IHtcbiAgICAgICdDVVNUXzInOiB7XG4gICAgICAgIGlkOiAnQ1VTVF8yJyxcbiAgICAgICAgY3VzdG9tZXJJZDogJ0NVU1RfMicsXG4gICAgICAgIG5hbWU6ICdKb2huIERlbW8nLFxuICAgICAgICBjdXN0b21lck5hbWU6ICdKb2huIERlbW8nLFxuICAgICAgICBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICBjb21wYW55OiAnRGVtbyBDb21wYW55JyxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgICAgaXNBZG1pbjogZmFsc2UsXG4gICAgICAgIGRlbW9Nb2RlOiBmYWxzZSxcbiAgICAgICAgaGFzUGVyc29uYWxpemVkSUNQOiB0cnVlLFxuICAgICAgICBoYXNEZXRhaWxlZEFuYWx5c2lzOiBmYWxzZSxcbiAgICAgICAgcGF5bWVudFN0YXR1czogJ0NvbXBsZXRlZCdcbiAgICAgIH0sXG4gICAgICAnQ1VTVF80Jzoge1xuICAgICAgICBpZDogJ0NVU1RfNCcsXG4gICAgICAgIGN1c3RvbWVySWQ6ICdDVVNUXzQnLFxuICAgICAgICBuYW1lOiAnQWRtaW4gRGVtbycsXG4gICAgICAgIGN1c3RvbWVyTmFtZTogJ1BsYXRmb3JtIEFkbWluaXN0cmF0b3InLFxuICAgICAgICBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICAgICAgY29tcGFueTogJ0gmUyBSZXZlbnVlIEludGVsbGlnZW5jZScsXG4gICAgICAgIHN0YXR1czogJ2FkbWluJyxcbiAgICAgICAgaXNBZG1pbjogdHJ1ZSxcbiAgICAgICAgZGVtb01vZGU6IHRydWUsXG4gICAgICAgIGhhc1BlcnNvbmFsaXplZElDUDogdHJ1ZSxcbiAgICAgICAgaGFzRGV0YWlsZWRBbmFseXNpczogdHJ1ZSxcbiAgICAgICAgYWRtaW5BY2Nlc3M6IHRydWUsXG4gICAgICAgIHBheW1lbnRTdGF0dXM6ICdDb21wbGV0ZWQnXG4gICAgICB9LFxuICAgICAgJ2RydTc4RFI5Nzg5U0RGODYyJzoge1xuICAgICAgICBpZDogJ2RydTc4RFI5Nzg5U0RGODYyJyxcbiAgICAgICAgY3VzdG9tZXJJZDogJ2RydTc4RFI5Nzg5U0RGODYyJyxcbiAgICAgICAgbmFtZTogJ0dldGVyJyxcbiAgICAgICAgY3VzdG9tZXJOYW1lOiAnR2V0ZXInLFxuICAgICAgICBlbWFpbDogJ2dldGVyQGhzLXBsYXRmb3JtLmNvbScsXG4gICAgICAgIGNvbXBhbnk6ICdIJlMgUGxhdGZvcm0nLFxuICAgICAgICBzdGF0dXM6ICdhZG1pbicsXG4gICAgICAgIGlzQWRtaW46IHRydWUsXG4gICAgICAgIGRlbW9Nb2RlOiB0cnVlLFxuICAgICAgICBoYXNQZXJzb25hbGl6ZWRJQ1A6IHRydWUsXG4gICAgICAgIGhhc0RldGFpbGVkQW5hbHlzaXM6IHRydWUsXG4gICAgICAgIGFkbWluQWNjZXNzOiB0cnVlLFxuICAgICAgICBwYXltZW50U3RhdHVzOiAnQ29tcGxldGVkJ1xuICAgICAgfSxcbiAgICAgICdDVVNUXzAyJzoge1xuICAgICAgICBpZDogJ0NVU1RfMDInLFxuICAgICAgICBjdXN0b21lcklkOiAnQ1VTVF8wMicsXG4gICAgICAgIG5hbWU6ICdUZXN0IFVzZXInLFxuICAgICAgICBjdXN0b21lck5hbWU6ICdUZXN0IFVzZXInLFxuICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICBjb21wYW55OiAnVGVzdCBDb21wYW55JyxcbiAgICAgICAgc3RhdHVzOiAndGVzdCcsXG4gICAgICAgIGlzQWRtaW46IGZhbHNlLFxuICAgICAgICBkZW1vTW9kZTogdHJ1ZSxcbiAgICAgICAgaGFzUGVyc29uYWxpemVkSUNQOiBmYWxzZSxcbiAgICAgICAgaGFzRGV0YWlsZWRBbmFseXNpczogZmFsc2UsXG4gICAgICAgIHBheW1lbnRTdGF0dXM6ICdQZW5kaW5nJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gcHJvZmlsZXNbY3VzdG9tZXJJZF0gfHwgbnVsbDtcbiAgfVxuXG4gIC8vIERldmVsb3BtZW50IHV0aWxpdGllc1xuICBpc0RlbW9Nb2RlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGN1c3RvbWVyID0gdGhpcy5nZXRDdXJyZW50Q3VzdG9tZXIoKTtcbiAgICByZXR1cm4gY3VzdG9tZXI/LmRlbW9Nb2RlID09PSB0cnVlO1xuICB9XG5cbiAgZ2V0U2Vzc2lvbkluZm8oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNBdXRoZW50aWNhdGVkOiB0aGlzLmlzQXV0aGVudGljYXRlZCgpLFxuICAgICAgY3VzdG9tZXJJZDogdGhpcy5nZXRDdXN0b21lcklkKCksXG4gICAgICBpc0FkbWluOiB0aGlzLmlzQWRtaW4oKSxcbiAgICAgIGhhc0FkbWluQWNjZXNzOiB0aGlzLmhhc0FkbWluQWNjZXNzKCksXG4gICAgICBoYXNDb21wbGV0ZWRQYXltZW50OiB0aGlzLmhhc0NvbXBsZXRlZFBheW1lbnQoKSxcbiAgICAgIGlzRGVtb01vZGU6IHRoaXMuaXNEZW1vTW9kZSgpLFxuICAgICAgc2Vzc2lvbkV4cGlyZXNBdDogdGhpcy5zZXNzaW9uPy5leHBpcmVzQXQsXG4gICAgICBzZXNzaW9uVmFsaWQ6IHRoaXMuc2Vzc2lvbiA/IHRoaXMuc2Vzc2lvbi5leHBpcmVzQXQgPiBEYXRlLm5vdygpIDogZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgLy8gRXh0cmFjdCBjcmVkZW50aWFscyBmcm9tIFVSTCBwYXJhbWV0ZXJzXG4gIGV4dHJhY3RDcmVkZW50aWFscyhzZWFyY2hQYXJhbXM6IFVSTFNlYXJjaFBhcmFtcyk6IHsgY3VzdG9tZXJJZDogc3RyaW5nOyBhY2Nlc3NUb2tlbjogc3RyaW5nIH0gfCBudWxsIHtcbiAgICBjb25zdCBjdXN0b21lcklkID0gc2VhcmNoUGFyYW1zLmdldCgnY3VzdG9tZXJJZCcpIHx8ICcnO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gc2VhcmNoUGFyYW1zLmdldCgndG9rZW4nKSB8fCAnJztcbiAgICBcbiAgICBpZiAoIWN1c3RvbWVySWQgfHwgIWFjY2Vzc1Rva2VuKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgY3VzdG9tZXJJZCwgYWNjZXNzVG9rZW4gfTtcbiAgfVxuXG4gIC8vIFZhbGlkYXRlIGNyZWRlbnRpYWxzIHVzaW5nIGV4aXN0aW5nIGF1dGhlbnRpY2F0aW9uIGxvZ2ljXG4gIGFzeW5jIHZhbGlkYXRlQ3JlZGVudGlhbHMoY3VzdG9tZXJJZDogc3RyaW5nLCBhY2Nlc3NUb2tlbjogc3RyaW5nKTogUHJvbWlzZTx7IHZhbGlkOiBib29sZWFuOyBjdXN0b21lckRhdGE/OiBhbnk7IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVXNlIGV4aXN0aW5nIGF1dGhlbnRpY2F0aW9uIG1ldGhvZCBmb3IgYWRtaW4gdXNlcnNcbiAgICAgIGlmIChjdXN0b21lcklkID09PSAnZHJ1NzhEUjk3ODlTREY4NjInICYmIGFjY2Vzc1Rva2VuID09PSAnYWRtaW4tZGVtby10b2tlbi0yMDI1Jykge1xuICAgICAgICBjb25zdCBhZG1pbkRhdGEgPSBhd2FpdCB0aGlzLmdldEFkbWluUHJvZmlsZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgICAgIGN1c3RvbWVyRGF0YTogYWRtaW5EYXRhXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEZvciByZWd1bGFyIGN1c3RvbWVycywgaW1wbGVtZW50IHByb3BlciB2YWxpZGF0aW9uXG4gICAgICAvLyBUaGlzIHdvdWxkIG5lZWQgaW50ZWdyYXRpb24gd2l0aCBhY3R1YWwgY3VzdG9tZXIgZGF0YWJhc2VcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdDdXN0b21lciB2YWxpZGF0aW9uIG5vdCBpbXBsZW1lbnRlZCBmb3Igbm9uLWFkbWluIHVzZXJzJ1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgVmFsaWRhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHNlc3Npb24gZnJvbSB2YWxpZGF0ZWQgY3JlZGVudGlhbHNcbiAgYXN5bmMgZ2VuZXJhdGVTZXNzaW9uKGN1c3RvbWVySWQ6IHN0cmluZywgY3VzdG9tZXJEYXRhOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHNlc3Npb25EYXRhOiBBdXRoU2Vzc2lvbiA9IHtcbiAgICAgIGN1c3RvbWVySWQsXG4gICAgICBhY2Nlc3NUb2tlbjogYHRva2VuXyR7RGF0ZS5ub3coKX1gLFxuICAgICAgcmVmcmVzaFRva2VuOiBgcmVmcmVzaF8ke0RhdGUubm93KCl9YCxcbiAgICAgIGV4cGlyZXNBdDogRGF0ZS5ub3coKSArICgyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gMjQgaG91cnNcbiAgICAgIGN1c3RvbWVyOiBjdXN0b21lckRhdGFcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb25EYXRhO1xuICAgIHRoaXMuc2F2ZVNlc3Npb25Ub1N0b3JhZ2UoKTtcbiAgICBcbiAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gIH1cblxuICAvLyBSZWZyZXNoIGV4aXN0aW5nIHNlc3Npb25cbiAgYXN5bmMgcmVmcmVzaFNlc3Npb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuc2Vzc2lvbiAmJiB0aGlzLnNlc3Npb24uZXhwaXJlc0F0ID4gRGF0ZS5ub3coKSkge1xuICAgICAgdGhpcy5zZXNzaW9uLmV4cGlyZXNBdCA9IERhdGUubm93KCkgKyAoMjQgKiA2MCAqIDYwICogMTAwMCk7IC8vIEV4dGVuZCBieSAyNCBob3Vyc1xuICAgICAgdGhpcy5zYXZlU2Vzc2lvblRvU3RvcmFnZSgpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgYXV0aFNlcnZpY2UgPSBuZXcgQXV0aFNlcnZpY2UoKTtcbmV4cG9ydCBkZWZhdWx0IGF1dGhTZXJ2aWNlOyJdLCJuYW1lcyI6WyJDb29raWVzIiwiZ2V0Q3VycmVudFVzZXIiLCJnZXRTdXBhYmFzZVVzZXIiLCJBdXRoU2VydmljZSIsImxvYWRTZXNzaW9uRnJvbVN0b3JhZ2UiLCJzZXNzaW9uRGF0YSIsImdldCIsIlNFU1NJT05fQ09PS0lFIiwic2Vzc2lvbiIsIkpTT04iLCJwYXJzZSIsImV4cGlyZXNBdCIsIkRhdGUiLCJub3ciLCJjbGVhclNlc3Npb24iLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwic2F2ZVNlc3Npb25Ub1N0b3JhZ2UiLCJzZXQiLCJUT0tFTl9DT09LSUUiLCJhY2Nlc3NUb2tlbiIsImV4cGlyZXMiLCJSRUZSRVNIX0NPT0tJRSIsInJlZnJlc2hUb2tlbiIsIkNVU1RPTUVSX0lEX0NPT0tJRSIsImN1c3RvbWVySWQiLCJzdHJpbmdpZnkiLCJyZW1vdmUiLCJsb2dpbldpdGhTdXBhYmFzZSIsInN1cGFiYXNlVXNlciIsInN1Y2Nlc3MiLCJjdXN0b21lciIsImlkIiwibmFtZSIsInVzZXJfbWV0YWRhdGEiLCJmdWxsX25hbWUiLCJlbWFpbCIsImN1c3RvbWVyTmFtZSIsImNvbXBhbnkiLCJzdGF0dXMiLCJpc0FkbWluIiwiZGVtb01vZGUiLCJoYXNQZXJzb25hbGl6ZWRJQ1AiLCJoYXNEZXRhaWxlZEFuYWx5c2lzIiwicGF5bWVudFN0YXR1cyIsImRhdGEiLCJpc1N1cGFiYXNlQXV0aGVudGljYXRlZCIsInVzZXIiLCJsb2dpbiIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImdldEN1c3RvbWVyUHJvZmlsZSIsInZhbGlkQWRtaW5Ub2tlbnMiLCJpbmNsdWRlcyIsImxvZ291dCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImlzQXV0aGVudGljYXRlZCIsImdldEN1cnJlbnRTZXNzaW9uIiwiZ2V0Q3VycmVudEN1c3RvbWVyIiwiZ2V0Q3VzdG9tZXJJZCIsImdldEFjY2Vzc1Rva2VuIiwiaGFzQWRtaW5BY2Nlc3MiLCJhZG1pbkFjY2VzcyIsImhhc0NvbXBsZXRlZFBheW1lbnQiLCJoYXNUb29sQWNjZXNzIiwidG9vbE5hbWUiLCJuZXdUb2tlbiIsInZhbGlkYXRlU2Vzc2lvbiIsIm9uZUhvdXIiLCJwcm9maWxlcyIsImlzRGVtb01vZGUiLCJnZXRTZXNzaW9uSW5mbyIsInNlc3Npb25FeHBpcmVzQXQiLCJzZXNzaW9uVmFsaWQiLCJleHRyYWN0Q3JlZGVudGlhbHMiLCJzZWFyY2hQYXJhbXMiLCJ2YWxpZGF0ZUNyZWRlbnRpYWxzIiwiYWRtaW5EYXRhIiwiZ2V0QWRtaW5Qcm9maWxlIiwidmFsaWQiLCJjdXN0b21lckRhdGEiLCJtZXNzYWdlIiwiZ2VuZXJhdGVTZXNzaW9uIiwicmVmcmVzaFNlc3Npb24iLCJpbnN0YW5jZSIsImF1dGhTZXJ2aWNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/services/authService.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/js-cookie/dist/js.cookie.mjs":
/*!***************************************************!*\
  !*** ./node_modules/js-cookie/dist/js.cookie.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ api)\n/* harmony export */ });\n/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9qcy1jb29raWUvZGlzdC9qcy5jb29raWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLEVBQUU7QUFDdEMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwwQkFBMEI7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUVBQXFFO0FBQ3JFO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQSx1RUFBdUU7QUFDdkU7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSw2Q0FBNkM7QUFDN0MsT0FBTztBQUNQO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0JBQW9CLHlDQUF5QztBQUM3RCxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBOztBQUVBLG1DQUFtQyxXQUFXO0FBQzlDOztBQUUwQiIsInNvdXJjZXMiOlsiL1VzZXJzL2dldGVyL2FuZHJ1L2hzLWFuZHJ1LXRlc3QvbW9kZXJuLXBsYXRmb3JtL25vZGVfbW9kdWxlcy9qcy1jb29raWUvZGlzdC9qcy5jb29raWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBqcy1jb29raWUgdjMuMC41IHwgTUlUICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby12YXIgKi9cbmZ1bmN0aW9uIGFzc2lnbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0XG59XG4vKiBlc2xpbnQtZW5hYmxlIG5vLXZhciAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby12YXIgKi9cbnZhciBkZWZhdWx0Q29udmVydGVyID0ge1xuICByZWFkOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWVbMF0gPT09ICdcIicpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSwgLTEpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvKCVbXFxkQS1GXXsyfSkrL2dpLCBkZWNvZGVVUklDb21wb25lbnQpXG4gIH0sXG4gIHdyaXRlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKS5yZXBsYWNlKFxuICAgICAgLyUoMlszNDZCRl18M1tBQy1GXXw0MHw1W0JERV18NjB8N1tCQ0RdKS9nLFxuICAgICAgZGVjb2RlVVJJQ29tcG9uZW50XG4gICAgKVxuICB9XG59O1xuLyogZXNsaW50LWVuYWJsZSBuby12YXIgKi9cblxuLyogZXNsaW50LWRpc2FibGUgbm8tdmFyICovXG5cbmZ1bmN0aW9uIGluaXQgKGNvbnZlcnRlciwgZGVmYXVsdEF0dHJpYnV0ZXMpIHtcbiAgZnVuY3Rpb24gc2V0IChuYW1lLCB2YWx1ZSwgYXR0cmlidXRlcykge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBhdHRyaWJ1dGVzID0gYXNzaWduKHt9LCBkZWZhdWx0QXR0cmlidXRlcywgYXR0cmlidXRlcyk7XG5cbiAgICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGF0dHJpYnV0ZXMuZXhwaXJlcyA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBhdHRyaWJ1dGVzLmV4cGlyZXMgKiA4NjRlNSk7XG4gICAgfVxuICAgIGlmIChhdHRyaWJ1dGVzLmV4cGlyZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMuZXhwaXJlcyA9IGF0dHJpYnV0ZXMuZXhwaXJlcy50b1VUQ1N0cmluZygpO1xuICAgIH1cblxuICAgIG5hbWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSlcbiAgICAgIC5yZXBsYWNlKC8lKDJbMzQ2Ql18NUV8NjB8N0MpL2csIGRlY29kZVVSSUNvbXBvbmVudClcbiAgICAgIC5yZXBsYWNlKC9bKCldL2csIGVzY2FwZSk7XG5cbiAgICB2YXIgc3RyaW5naWZpZWRBdHRyaWJ1dGVzID0gJyc7XG4gICAgZm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICBpZiAoIWF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgc3RyaW5naWZpZWRBdHRyaWJ1dGVzICs9ICc7ICcgKyBhdHRyaWJ1dGVOYW1lO1xuXG4gICAgICBpZiAoYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyBDb25zaWRlcnMgUkZDIDYyNjUgc2VjdGlvbiA1LjI6XG4gICAgICAvLyAuLi5cbiAgICAgIC8vIDMuICBJZiB0aGUgcmVtYWluaW5nIHVucGFyc2VkLWF0dHJpYnV0ZXMgY29udGFpbnMgYSAleDNCIChcIjtcIilcbiAgICAgIC8vICAgICBjaGFyYWN0ZXI6XG4gICAgICAvLyBDb25zdW1lIHRoZSBjaGFyYWN0ZXJzIG9mIHRoZSB1bnBhcnNlZC1hdHRyaWJ1dGVzIHVwIHRvLFxuICAgICAgLy8gbm90IGluY2x1ZGluZywgdGhlIGZpcnN0ICV4M0IgKFwiO1wiKSBjaGFyYWN0ZXIuXG4gICAgICAvLyAuLi5cbiAgICAgIHN0cmluZ2lmaWVkQXR0cmlidXRlcyArPSAnPScgKyBhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdLnNwbGl0KCc7JylbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIChkb2N1bWVudC5jb29raWUgPVxuICAgICAgbmFtZSArICc9JyArIGNvbnZlcnRlci53cml0ZSh2YWx1ZSwgbmFtZSkgKyBzdHJpbmdpZmllZEF0dHJpYnV0ZXMpXG4gIH1cblxuICBmdW5jdGlvbiBnZXQgKG5hbWUpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyB8fCAoYXJndW1lbnRzLmxlbmd0aCAmJiAhbmFtZSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcbiAgICAvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC5cbiAgICB2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdO1xuICAgIHZhciBqYXIgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcbiAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJz0nKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGZvdW5kID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzBdKTtcbiAgICAgICAgamFyW2ZvdW5kXSA9IGNvbnZlcnRlci5yZWFkKHZhbHVlLCBmb3VuZCk7XG5cbiAgICAgICAgaWYgKG5hbWUgPT09IGZvdW5kKSB7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZSA/IGphcltuYW1lXSA6IGphclxuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5jcmVhdGUoXG4gICAge1xuICAgICAgc2V0LFxuICAgICAgZ2V0LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAobmFtZSwgYXR0cmlidXRlcykge1xuICAgICAgICBzZXQoXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICAnJyxcbiAgICAgICAgICBhc3NpZ24oe30sIGF0dHJpYnV0ZXMsIHtcbiAgICAgICAgICAgIGV4cGlyZXM6IC0xXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICB3aXRoQXR0cmlidXRlczogZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmV0dXJuIGluaXQodGhpcy5jb252ZXJ0ZXIsIGFzc2lnbih7fSwgdGhpcy5hdHRyaWJ1dGVzLCBhdHRyaWJ1dGVzKSlcbiAgICAgIH0sXG4gICAgICB3aXRoQ29udmVydGVyOiBmdW5jdGlvbiAoY29udmVydGVyKSB7XG4gICAgICAgIHJldHVybiBpbml0KGFzc2lnbih7fSwgdGhpcy5jb252ZXJ0ZXIsIGNvbnZlcnRlciksIHRoaXMuYXR0cmlidXRlcylcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGF0dHJpYnV0ZXM6IHsgdmFsdWU6IE9iamVjdC5mcmVlemUoZGVmYXVsdEF0dHJpYnV0ZXMpIH0sXG4gICAgICBjb252ZXJ0ZXI6IHsgdmFsdWU6IE9iamVjdC5mcmVlemUoY29udmVydGVyKSB9XG4gICAgfVxuICApXG59XG5cbnZhciBhcGkgPSBpbml0KGRlZmF1bHRDb252ZXJ0ZXIsIHsgcGF0aDogJy8nIH0pO1xuLyogZXNsaW50LWVuYWJsZSBuby12YXIgKi9cblxuZXhwb3J0IHsgYXBpIGFzIGRlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/js-cookie/dist/js.cookie.mjs\n"));

/***/ })

}]);