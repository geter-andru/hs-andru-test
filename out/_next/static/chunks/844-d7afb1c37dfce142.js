"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{2844:(e,t,a)=>{a.r(t),a.d(t,{auth:()=>d,businessCaseAPI:()=>h,costCalculatorAPI:()=>g,customerAPI:()=>p,default:()=>A,exportAPI:()=>y,progressAPI:()=>w,webhookAPI:()=>C});var s=a(3464),o=a(7383),r=a(3568);let n=a(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:3001",i="hs_access_token",c="hs_refresh_token",l="hs_customer_id",u=s.A.create({baseURL:n,timeout:3e4,headers:{"Content-Type":"application/json"}});u.interceptors.request.use(e=>{let t=o.A.get(i);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),u.interceptors.response.use(e=>e,async e=>{var t,a,m,d,p,g;let h=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!h._retry){h._retry=!0;try{let e=o.A.get(c);if(e){let{accessToken:t}=(await s.A.post("".concat(n,"/api/auth/refresh"),{refreshToken:e})).data.data;return o.A.set(i,t,{expires:1}),h.headers&&(h.headers.Authorization="Bearer ".concat(t)),u(h)}}catch(e){return o.A.remove(i),o.A.remove(c),o.A.remove(l),window.location.href="/login",Promise.reject(e)}}return(null==(a=e.response)?void 0:a.status)===429?(null==(g=e.config)||null==(p=g.url)?void 0:p.includes("/track"))||r.Ay.error("Rate limit exceeded. Please wait before trying again."):(null==(m=e.response)?void 0:m.status)===500?r.Ay.error("Server error. Please try again later."):(null==(d=e.response)?void 0:d.status)===403&&r.Ay.error("Access denied. You do not have permission to perform this action."),Promise.reject(e)});let m={CUST_2:{id:"CUST_2",customerId:"CUST_2",name:"Demo Customer",customerName:"Demo Customer",email:"demo@example.com",company:"Demo Company Inc.",status:"active",isAdmin:!1,demoMode:!1,hasPersonalizedICP:!0,hasDetailedAnalysis:!1,paymentStatus:"Completed"},CUST_4:{id:"CUST_4",customerId:"CUST_4",name:"Admin Demo",customerName:"Platform Administrator",email:"admin@example.com",company:"H&S Revenue Intelligence",status:"admin",isAdmin:!0,demoMode:!0,hasPersonalizedICP:!0,hasDetailedAnalysis:!0,adminAccess:!0,paymentStatus:"Completed"},dru78DR9789SDF862:{id:"dru78DR9789SDF862",customerId:"dru78DR9789SDF862",name:"Geter",customerName:"Geter",email:"geter@hs-platform.com",company:"H&S Platform",status:"admin",isAdmin:!0,demoMode:!0,hasPersonalizedICP:!0,hasDetailedAnalysis:!0,adminAccess:!0,paymentStatus:"Completed"}},d={async login(e,t){try{if(await new Promise(e=>setTimeout(e,500)),"dru78DR9789SDF862"===e||"CUST_4"===e&&"admin-demo-token-2025"===t){let a=m.dru78DR9789SDF862,s=t||"admin_token_".concat(Date.now());return o.A.set(i,s,{expires:1}),o.A.set(c,"refresh_".concat(s),{expires:7}),o.A.set(l,e,{expires:7}),{success:!0,data:a}}if("CUST_02"===e&&"test-token-123456"===t){let a=m.CUST_2;return o.A.set(i,t,{expires:1}),o.A.set(c,"refresh_".concat(t),{expires:7}),o.A.set(l,e,{expires:7}),{success:!0,data:a}}let a=m[e];if(!a)return{success:!1,error:"Customer not found. Please check your Customer ID."};let s=t||"mock_token_".concat(e,"_").concat(Date.now()),r="mock_refresh_".concat(e,"_").concat(Date.now());return o.A.set(i,s,{expires:1}),o.A.set(c,r,{expires:7}),o.A.set(l,e,{expires:7}),{success:!0,data:a}}catch(e){return{success:!1,error:"Login failed. Please try again."}}},logout(){o.A.remove(i),o.A.remove(c),o.A.remove(l),window.location.href="/login"},getCustomerId:()=>o.A.get(l),isAuthenticated:()=>!!o.A.get(i),isAdmin(){let e=this.getCustomerId();return"dru78DR9789SDF862"===e||"CUST_4"===e},getCurrentCustomer(){let e=this.getCustomerId();return e&&m[e]||null},hasAdminAccess(){let e=this.getCurrentCustomer();return(null==e?void 0:e.isAdmin)===!0&&(null==e?void 0:e.adminAccess)===!0},hasCompletedPayment(){let e=this.getCurrentCustomer();return null!=e&&!!e.isAdmin||(null==e?void 0:e.paymentStatus)==="Completed"}},p={async getCustomer(e){try{let{airtableService:t}=await a.e(194).then(a.bind(a,9194));return await t.getCustomerAssets(e)}catch(e){throw console.error("Failed to get customer:",e),e}},async getICP(e){try{let{airtableService:t}=await a.e(194).then(a.bind(a,9194));return(await t.getCustomerAssets(e)).icpContent}catch(e){throw console.error("Failed to get ICP:",e),e}},async generateAIICP(e,t){try{var s;await new Promise(e=>setTimeout(e,2e3));let{airtableService:o}=await a.e(194).then(a.bind(a,9194));return await o.saveUserProgress(e,"icp_generation",{inputData:t,status:"completed",generatedAt:new Date().toISOString()}),{success:!0,data:(null==(s=o.getMockICPContent)?void 0:s.call(o))||{},message:"ICP generated successfully"}}catch(e){throw console.error("Failed to generate AI ICP:",e),e}},async updateCustomer(e,t){try{let{airtableService:s}=await a.e(194).then(a.bind(a,9194));if(!await s.updateCustomerAssets(e,t))throw Error("Failed to update customer data");return{success:!0,data:t}}catch(e){throw console.error("Failed to update customer:",e),e}}},g={async calculate(e){try{await new Promise(e=>setTimeout(e,1500));let{currentRevenue:t,targetGrowthRate:a,averageDealSize:s,salesCycleLength:o,conversionRate:r,churnRate:n,timeframe:i}=e,c=parseFloat(t)||0,l=parseFloat(a)/100,u=parseFloat(s)||0,m=parseInt(o)||90;parseFloat(r);let d=parseFloat(n)/100,p=parseInt(i)||12,g=c/12*l/12*p*(p+1)/2,h=.12*c,w=c*d,y=Math.max(0,(m-60)*u*.02),C=g+h+w+y;return{success:!0,data:{totalCostOfInaction:Math.round(C),monthlyImpact:Math.round(C/p),breakdown:{missedGrowthRevenue:Math.round(g),inefficiencyLoss:Math.round(h),churnImpact:Math.round(w),salesCycleCost:Math.round(y)},inputData:e,calculatedAt:new Date().toISOString()}}}catch(e){throw console.error("Failed to calculate cost:",e),e}},async calculateWithAI(e){try{let t=await this.calculate(e);return await new Promise(e=>setTimeout(e,1e3)),{...t,data:{...t.data,aiInsights:{industryComparison:"Above average risk factors identified",recommendations:["Prioritize revenue optimization initiatives","Implement process automation to reduce inefficiencies","Focus on customer retention programs"],confidenceScore:.87}}}}catch(e){throw console.error("Failed to calculate with AI:",e),e}},async save(e){try{let{airtableService:t}=await a.e(194).then(a.bind(a,9194)),s=e.customerId||d.getCustomerId();if(!s)throw Error("Customer ID required to save calculation");return{success:await t.saveUserProgress(s,"cost_calculation",{calculationData:e,savedAt:new Date().toISOString()}),data:e}}catch(e){throw console.error("Failed to save calculation:",e),e}},async getHistory(e){try{let{airtableService:t}=await a.e(194).then(a.bind(a,9194)),s=await t.getUserProgress(e,"cost_calculation");return{success:!0,data:s?[s]:[]}}catch(e){throw console.error("Failed to get calculation history:",e),e}},async compare(e){try{await new Promise(e=>setTimeout(e,1e3));let t=["conservative","realistic","aggressive"].map(t=>({scenario:t,multiplier:"conservative"===t?.8:"aggressive"===t?1.3:1,totalCost:Math.round((e.totalCostOfInaction||0)*("conservative"===t?.8:"aggressive"===t?1.3:1))}));return{success:!0,data:t}}catch(e){throw console.error("Failed to compare scenarios:",e),e}}},h={async generate(e){try{var t;await new Promise(e=>setTimeout(e,2e3));let{airtableService:s}=await a.e(194).then(a.bind(a,9194)),o=e.customerId||d.getCustomerId();if(!o)throw Error("Customer ID required to generate business case");let r=(null==(t=s.getMockBusinessCaseContent)?void 0:t.call(s))||{};return await s.saveUserProgress(o,"business_case_generation",{templateType:e.template||"pilot",inputData:e,status:"completed",generatedAt:new Date().toISOString()}),{success:!0,data:{...r,customizations:{companyName:e.companyName,projectTitle:e.projectTitle,selectedTemplate:e.template||"pilot"},generatedAt:new Date().toISOString()},message:"Business case generated successfully"}}catch(e){throw console.error("Failed to generate business case:",e),e}},async save(e){try{let{airtableService:t}=await a.e(194).then(a.bind(a,9194)),s=e.customerId||d.getCustomerId();if(!s)throw Error("Customer ID required to save business case");return{success:await t.saveUserProgress(s,"business_case_builder",{formData:e.formData,activeTemplate:e.activeTemplate,savedAt:new Date().toISOString()}),data:e}}catch(e){throw console.error("Failed to save business case:",e),e}},async getTemplates(){try{return{success:!0,data:[{id:"pilot",name:"Pilot Program Proposal",description:"Test implementation with limited scope and budget",duration:"3-6 months",investment:"$25,000-$75,000",keyPoints:["Low-risk evaluation period","Measurable success criteria","Clear path to full implementation","Stakeholder buy-in development"]},{id:"fullImplementation",name:"Full Implementation Business Case",description:"Enterprise-wide transformation initiative",duration:"6-18 months",investment:"$100,000-$500,000",keyPoints:["Comprehensive transformation","Long-term value creation","Competitive advantage development","Organizational change management"]},{id:"expansion",name:"Expansion Phase Proposal",description:"Scale successful pilot to additional areas",duration:"4-8 months",investment:"$50,000-$200,000",keyPoints:["Proven concept scaling","Accelerated implementation","Risk mitigation from pilot learnings","ROI multiplication opportunity"]}]}}catch(e){throw console.error("Failed to get templates:",e),e}},async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pdf";try{return await new Promise(e=>setTimeout(e,1500)),{success:!0,data:{format:t,downloadUrl:"/api/business-case/export/".concat(e.id,"?format=").concat(t),filename:"business-case-".concat(e.companyName||"export",".").concat(t),exportedAt:new Date().toISOString()},message:"Business case exported as ".concat(t.toUpperCase())}}catch(e){throw console.error("Failed to export business case:",e),e}},customize:async e=>(await u.post("/api/business-case/customize",e)).data,save:async e=>(await u.post("/api/business-case/save",e)).data,export:async e=>(await u.post("/api/business-case/export",e)).data,getTemplates:async()=>(await u.get("/api/business-case/templates")).data,getHistory:async e=>(await u.get("/api/business-case/".concat(e,"/history"))).data},w={getProgress:async e=>(await u.get("/api/progress/".concat(e))).data,trackAction:async(e,t,a)=>(await u.post("/api/progress/".concat(e,"/track"),{action:t,metadata:a})).data,getMilestones:async e=>(await u.get("/api/progress/".concat(e,"/milestones"))).data,getInsights:async e=>(await u.get("/api/progress/".concat(e,"/insights"))).data,completeMilestone:async(e,t,a)=>(await u.post("/api/progress/".concat(e,"/milestones/").concat(t,"/complete"),{metadata:a})).data},y={exportICP:async e=>(await u.post("/api/export/icp",e)).data,exportCostCalculator:async e=>(await u.post("/api/export/cost-calculator",e)).data,exportBusinessCase:async e=>(await u.post("/api/export/business-case",e)).data,exportComprehensive:async e=>(await u.post("/api/export/comprehensive",e)).data,getExportStatus:async e=>(await u.get("/api/export/status/".concat(e))).data,getExportHistory:async e=>(await u.get("/api/export/history/".concat(e))).data},C={triggerAutomation:async(e,t,a)=>(await u.post("/api/webhooks/trigger",{customerId:e,automationType:t,data:a})).data,getAutomationStatus:async()=>(await u.get("/api/webhooks/status")).data},A=u}}]);